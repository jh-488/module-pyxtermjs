var e=globalThis,t={},i={},r=e.parcelRequiref158;null==r&&((r=function(e){if(e in t)return t[e].exports;if(e in i){var r=i[e];delete i[e];var n={id:e,exports:{}};return t[e]=n,r.call(n.exports,n,n.exports),n.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){i[e]=t},e.parcelRequiref158=r),r.register;var n=r("hPtJY"),s=r("6ZWSX").Buffer;!function(e){let t,i,a;function l(e,t,i,r){return new(i||(i=Promise))(function(n,s){function a(e){try{o(r.next(e))}catch(e){s(e)}}function l(e){try{o(r.throw(e))}catch(e){s(e)}}function o(e){var t;e.done?n(e.value):((t=e.value)instanceof i?t:new i(function(e){e(t)})).then(a,l)}o((r=r.apply(e,t||[])).next())})}function o(e){if(!Symbol.asyncIterator)throw TypeError("Symbol.asyncIterator is not defined.");var t,i=e[Symbol.asyncIterator];return i?i.call(e):(e=function(e){var t="function"==typeof Symbol&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}(e),t={},r("next"),r("throw"),r("return"),t[Symbol.asyncIterator]=function(){return this},t);function r(i){t[i]=e[i]&&function(t){return new Promise(function(r,n){!function(e,t,i,r){Promise.resolve(r).then(function(t){e({value:t,done:i})},t)}(r,n,(t=e[i](t)).done,t.value)})}}}function h(e){let t=e.length;for(;--t>=0;)e[t]=0}"function"==typeof SuppressedError&&SuppressedError;let d=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),u=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),f=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),c=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_=Array(576);h(_);let p=Array(60);h(p);let w=Array(512);h(w);let g=Array(256);h(g);let m=Array(29);h(m);let y=Array(30);function b(e,t,i,r,n){this.static_tree=e,this.extra_bits=t,this.extra_base=i,this.elems=r,this.max_length=n,this.has_stree=e&&e.length}function v(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}h(y);let k=e=>e<256?w[e]:w[256+(e>>>7)],x=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},z=(e,t,i)=>{e.bi_valid>16-i?(e.bi_buf|=t<<e.bi_valid&65535,x(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=i-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=i)},A=(e,t,i)=>{z(e,i[2*t],i[2*t+1])},S=(e,t)=>{let i=0;do i|=1&e,e>>>=1,i<<=1;while(--t>0)return i>>>1},T=(e,t,i)=>{let r=Array(16),n,s,a=0;for(n=1;n<=15;n++)a=a+i[n-1]<<1,r[n]=a;for(s=0;s<=t;s++){let t=e[2*s+1];0!==t&&(e[2*s]=S(r[t]++,t))}},F=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},I=e=>{e.bi_valid>8?x(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},E=(e,t,i,r)=>{let n=2*t,s=2*i;return e[n]<e[s]||e[n]===e[s]&&r[t]<=r[i]},C=(e,t,i)=>{let r=e.heap[i],n=i<<1;for(;n<=e.heap_len&&(n<e.heap_len&&E(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!E(t,r,e.heap[n],e.depth));)e.heap[i]=e.heap[n],i=n,n<<=1;e.heap[i]=r},B=(e,t,i)=>{let r,n,s,a,l=0;if(0!==e.sym_next)do r=(255&e.pending_buf[e.sym_buf+l++])+((255&e.pending_buf[e.sym_buf+l++])<<8),n=e.pending_buf[e.sym_buf+l++],0===r?A(e,n,t):(A(e,(s=g[n])+256+1,t),0!==(a=d[s])&&z(e,n-=m[s],a),A(e,s=k(--r),i),0!==(a=u[s])&&z(e,r-=y[s],a));while(l<e.sym_next)A(e,256,t)},D=(e,t)=>{let i=t.dyn_tree,r=t.stat_desc.static_tree,n=t.stat_desc.has_stree,s=t.stat_desc.elems,a,l,o,h=-1;for(e.heap_len=0,e.heap_max=573,a=0;a<s;a++)0!==i[2*a]?(e.heap[++e.heap_len]=h=a,e.depth[a]=0):i[2*a+1]=0;for(;e.heap_len<2;)i[2*(o=e.heap[++e.heap_len]=h<2?++h:0)]=1,e.depth[o]=0,e.opt_len--,n&&(e.static_len-=r[2*o+1]);for(t.max_code=h,a=e.heap_len>>1;a>=1;a--)C(e,i,a);o=s;do a=e.heap[1],e.heap[1]=e.heap[e.heap_len--],C(e,i,1),l=e.heap[1],e.heap[--e.heap_max]=a,e.heap[--e.heap_max]=l,i[2*o]=i[2*a]+i[2*l],e.depth[o]=(e.depth[a]>=e.depth[l]?e.depth[a]:e.depth[l])+1,i[2*a+1]=i[2*l+1]=o,e.heap[1]=o++,C(e,i,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let i=t.dyn_tree,r=t.max_code,n=t.stat_desc.static_tree,s=t.stat_desc.has_stree,a=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,o=t.stat_desc.max_length,h,d,u,f,c,_,p=0;for(f=0;f<=15;f++)e.bl_count[f]=0;for(i[2*e.heap[e.heap_max]+1]=0,h=e.heap_max+1;h<573;h++)(f=i[2*i[2*(d=e.heap[h])+1]+1]+1)>o&&(f=o,p++),i[2*d+1]=f,d>r||(e.bl_count[f]++,c=0,d>=l&&(c=a[d-l]),_=i[2*d],e.opt_len+=_*(f+c),s&&(e.static_len+=_*(n[2*d+1]+c)));if(0!==p){do{for(f=o-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[o]--,p-=2}while(p>0)for(f=o;0!==f;f--)for(d=e.bl_count[f];0!==d;)(u=e.heap[--h])>r||(i[2*u+1]!==f&&(e.opt_len+=(f-i[2*u+1])*i[2*u],i[2*u+1]=f),d--)}})(e,t),T(i,h,e.bl_count)},R=(e,t,i)=>{let r,n,s=-1,a=t[1],l=0,o=7,h=4;for(0===a&&(o=138,h=3),t[2*(i+1)+1]=65535,r=0;r<=i;r++)n=a,a=t[2*(r+1)+1],++l<o&&n===a||(l<h?e.bl_tree[2*n]+=l:0!==n?(n!==s&&e.bl_tree[2*n]++,e.bl_tree[32]++):l<=10?e.bl_tree[34]++:e.bl_tree[36]++,l=0,s=n,0===a?(o=138,h=3):n===a?(o=6,h=3):(o=7,h=4))},U=(e,t,i)=>{let r,n,s=-1,a=t[1],l=0,o=7,h=4;for(0===a&&(o=138,h=3),r=0;r<=i;r++)if(n=a,a=t[2*(r+1)+1],!(++l<o&&n===a)){if(l<h)do A(e,n,e.bl_tree);while(0!=--l)else 0!==n?(n!==s&&(A(e,n,e.bl_tree),l--),A(e,16,e.bl_tree),z(e,l-3,2)):l<=10?(A(e,17,e.bl_tree),z(e,l-3,3)):(A(e,18,e.bl_tree),z(e,l-11,7));l=0,s=n,0===a?(o=138,h=3):n===a?(o=6,h=3):(o=7,h=4)}},L=!1,N=(e,t,i,r)=>{z(e,0+(r?1:0),3),I(e),x(e,i),x(e,~i),i&&e.pending_buf.set(e.window.subarray(t,t+i),e.pending),e.pending+=i};var P={_tr_init:e=>{L||((()=>{let e,r,n,s,l;let o=Array(16);for(n=0,s=0;s<28;s++)for(m[s]=n,e=0;e<1<<d[s];e++)g[n++]=s;for(g[n-1]=s,l=0,s=0;s<16;s++)for(y[s]=l,e=0;e<1<<u[s];e++)w[l++]=s;for(l>>=7;s<30;s++)for(y[s]=l<<7,e=0;e<1<<u[s]-7;e++)w[256+l++]=s;for(r=0;r<=15;r++)o[r]=0;for(e=0;e<=143;)_[2*e+1]=8,e++,o[8]++;for(;e<=255;)_[2*e+1]=9,e++,o[9]++;for(;e<=279;)_[2*e+1]=7,e++,o[7]++;for(;e<=287;)_[2*e+1]=8,e++,o[8]++;for(T(_,287,o),e=0;e<30;e++)p[2*e+1]=5,p[2*e]=S(e,5);t=new b(_,d,257,286,15),i=new b(p,u,0,30,15),a=new b([],f,0,19,7)})(),L=!0),e.l_desc=new v(e.dyn_ltree,t),e.d_desc=new v(e.dyn_dtree,i),e.bl_desc=new v(e.bl_tree,a),e.bi_buf=0,e.bi_valid=0,F(e)},_tr_stored_block:N,_tr_flush_block:(e,t,i,r)=>{let n,s,a=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,i=4093624447;for(t=0;t<=31;t++,i>>>=1)if(1&i&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),D(e,e.l_desc),D(e,e.d_desc),a=(e=>{let t;for(R(e,e.dyn_ltree,e.l_desc.max_code),R(e,e.dyn_dtree,e.d_desc.max_code),D(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*c[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),n=e.opt_len+3+7>>>3,(s=e.static_len+3+7>>>3)<=n&&(n=s)):n=s=i+5,i+4<=n&&-1!==t?N(e,t,i,r):4===e.strategy||s===n?(z(e,2+(r?1:0),3),B(e,_,p)):(z(e,4+(r?1:0),3),((e,t,i,r)=>{let n;for(z(e,t-257,5),z(e,i-1,5),z(e,r-4,4),n=0;n<r;n++)z(e,e.bl_tree[2*c[n]+1],3);U(e,e.dyn_ltree,t-1),U(e,e.dyn_dtree,i-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),B(e,e.dyn_ltree,e.dyn_dtree)),F(e),r&&I(e)},_tr_tally:(e,t,i)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=i,0===t?e.dyn_ltree[2*i]++:(e.matches++,t--,e.dyn_ltree[2*(g[i]+256+1)]++,e.dyn_dtree[2*k(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{z(e,2,3),A(e,256,_),16===e.bi_valid?(x(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}},O=(e,t,i,r)=>{let n=65535&e|0,s=e>>>16&65535|0,a=0;for(;0!==i;){a=i>2e3?2e3:i,i-=a;do s=s+(n=n+t[r++]|0)|0;while(--a)n%=65521,s%=65521}return n|s<<16|0};let Z=new Uint32Array((()=>{let e,t=[];for(var i=0;i<256;i++){e=i;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[i]=e}return t})());var M=(e,t,i,r)=>{let n=r+i;e^=-1;for(let i=r;i<n;i++)e=e>>>8^Z[255&(e^t[i])];return -1^e},$={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},j={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:H,_tr_stored_block:W,_tr_flush_block:q,_tr_tally:K,_tr_align:J}=P,{Z_NO_FLUSH:G,Z_PARTIAL_FLUSH:X,Z_FULL_FLUSH:Y,Z_FINISH:Q,Z_BLOCK:V,Z_OK:ee,Z_STREAM_END:et,Z_STREAM_ERROR:ei,Z_DATA_ERROR:er,Z_BUF_ERROR:en,Z_DEFAULT_COMPRESSION:es,Z_FILTERED:ea,Z_HUFFMAN_ONLY:el,Z_RLE:eo,Z_FIXED:eh,Z_DEFAULT_STRATEGY:ed,Z_UNKNOWN:eu,Z_DEFLATED:ef}=j,ec=(e,t)=>(e.msg=$[t],t),e_=e=>2*e-(e>4?9:0),ep=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ew=e=>{let t,i,r,n=e.w_size;r=t=e.hash_size;do i=e.head[--r],e.head[r]=i>=n?i-n:0;while(--t)r=t=n;do i=e.prev[--r],e.prev[r]=i>=n?i-n:0;while(--t)},eg=(e,t,i)=>(t<<e.hash_shift^i)&e.hash_mask,em=e=>{let t=e.state,i=t.pending;i>e.avail_out&&(i=e.avail_out),0!==i&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+i),e.next_out),e.next_out+=i,t.pending_out+=i,e.total_out+=i,e.avail_out-=i,t.pending-=i,0===t.pending&&(t.pending_out=0))},ey=(e,t)=>{q(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,em(e.strm)},eb=(e,t)=>{e.pending_buf[e.pending++]=t},ev=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},ek=(e,t,i,r)=>{let n=e.avail_in;return n>r&&(n=r),0===n?0:(e.avail_in-=n,t.set(e.input.subarray(e.next_in,e.next_in+n),i),1===e.state.wrap?e.adler=O(e.adler,t,n,i):2===e.state.wrap&&(e.adler=M(e.adler,t,n,i)),e.next_in+=n,e.total_in+=n,n)},ex=(e,t)=>{let i,r,n=e.max_chain_length,s=e.strstart,a=e.prev_length,l=e.nice_match,o=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,h=e.window,d=e.w_mask,u=e.prev,f=e.strstart+258,c=h[s+a-1],_=h[s+a];e.prev_length>=e.good_match&&(n>>=2),l>e.lookahead&&(l=e.lookahead);do if(h[(i=t)+a]===_&&h[i+a-1]===c&&h[i]===h[s]&&h[++i]===h[s+1]){s+=2,i++;do;while(h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&h[++s]===h[++i]&&s<f)if(r=258-(f-s),s=f-258,r>a){if(e.match_start=t,a=r,r>=l)break;c=h[s+a-1],_=h[s+a]}}while((t=u[t&d])>o&&0!=--n)return a<=e.lookahead?a:e.lookahead},ez=e=>{let t,i,r;let n=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-262)&&(e.window.set(e.window.subarray(n,n+n-i),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),ew(e),i+=n),0===e.strm.avail_in)break;if(t=ek(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=eg(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=eg(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},eA=(e,t)=>{let i,r,n,s=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,a=0,l=e.strm.avail_in;do{if(i=65535,n=e.bi_valid+42>>3,e.strm.avail_out<n||(n=e.strm.avail_out-n,i>(r=e.strstart-e.block_start)+e.strm.avail_in&&(i=r+e.strm.avail_in),i>n&&(i=n),i<s&&(0===i&&t!==Q||t===G||i!==r+e.strm.avail_in)))break;a=t===Q&&i===r+e.strm.avail_in?1:0,W(e,0,0,a),e.pending_buf[e.pending-4]=i,e.pending_buf[e.pending-3]=i>>8,e.pending_buf[e.pending-2]=~i,e.pending_buf[e.pending-1]=~i>>8,em(e.strm),r&&(r>i&&(r=i),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,i-=r),i&&(ek(e.strm,e.strm.output,e.strm.next_out,i),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i)}while(0===a)return(l-=e.strm.avail_in)&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),a?4:t!==G&&t!==Q&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(n=e.window_size-e.strstart,e.strm.avail_in>n&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,n+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),n>e.strm.avail_in&&(n=e.strm.avail_in),n&&(ek(e.strm,e.window,e.strstart,n),e.strstart+=n,e.insert+=n>e.w_size-e.insert?e.w_size-e.insert:n),e.high_water<e.strstart&&(e.high_water=e.strstart),n=e.bi_valid+42>>3,s=(n=e.pending_buf_size-n>65535?65535:e.pending_buf_size-n)>e.w_size?e.w_size:n,((r=e.strstart-e.block_start)>=s||(r||t===Q)&&t!==G&&0===e.strm.avail_in&&r<=n)&&(i=r>n?n:r,a=t===Q&&0===e.strm.avail_in&&i===r?1:0,W(e,e.block_start,i,a),e.block_start+=i,em(e.strm)),a?3:1)},eS=(e,t)=>{let i,r;for(;;){if(e.lookahead<262){if(ez(e),e.lookahead<262&&t===G)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==i&&e.strstart-i<=e.w_size-262&&(e.match_length=ex(e,i)),e.match_length>=3){if(r=K(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=eg(e,e.ins_h,e.window[e.strstart+1])}else r=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ey(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===Q?(ey(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ey(e,!1),0===e.strm.avail_out)?1:2},eT=(e,t)=>{let i,r,n;for(;;){if(e.lookahead<262){if(ez(e),e.lookahead<262&&t===G)return 1;if(0===e.lookahead)break}if(i=0,e.lookahead>=3&&(e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==i&&e.prev_length<e.max_lazy_match&&e.strstart-i<=e.w_size-262&&(e.match_length=ex(e,i),e.match_length<=5&&(e.strategy===ea||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,r=K(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=eg(e,e.ins_h,e.window[e.strstart+3-1]),i=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,r&&(ey(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=K(e,0,e.window[e.strstart-1]))&&ey(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=K(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===Q?(ey(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ey(e,!1),0===e.strm.avail_out)?1:2};function eF(e,t,i,r,n){this.good_length=e,this.max_lazy=t,this.nice_length=i,this.max_chain=r,this.func=n}let eI=[new eF(0,0,0,0,eA),new eF(4,4,8,4,eS),new eF(4,5,16,8,eS),new eF(4,6,32,32,eS),new eF(4,4,16,16,eT),new eF(8,16,32,32,eT),new eF(8,16,128,128,eT),new eF(8,32,128,256,eT),new eF(32,128,258,1024,eT),new eF(32,258,258,4096,eT)];function eE(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ef,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ep(this.dyn_ltree),ep(this.dyn_dtree),ep(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ep(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ep(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let eC=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},eB=e=>{if(eC(e))return ec(e,ei);e.total_in=e.total_out=0,e.data_type=eu;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=2===t.wrap?0:1,t.last_flush=-2,H(t),ee},eD=e=>{var t;let i=eB(e);return i===ee&&((t=e.state).window_size=2*t.w_size,ep(t.head),t.max_lazy_match=eI[t.level].max_lazy,t.good_match=eI[t.level].good_length,t.nice_match=eI[t.level].nice_length,t.max_chain_length=eI[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),i},eR=(e,t,i,r,n,s)=>{if(!e)return ei;let a=1;if(t===es&&(t=6),r<0?(a=0,r=-r):r>15&&(a=2,r-=16),n<1||n>9||i!==ef||r<8||r>15||t<0||t>9||s<0||s>eh||8===r&&1!==a)return ec(e,ei);8===r&&(r=9);let l=new eE;return e.state=l,l.strm=e,l.status=42,l.wrap=a,l.gzhead=null,l.w_bits=r,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=n+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+3-1)/3),l.window=new Uint8Array(2*l.w_size),l.head=new Uint16Array(l.hash_size),l.prev=new Uint16Array(l.w_size),l.lit_bufsize=1<<n+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new Uint8Array(l.pending_buf_size),l.sym_buf=l.lit_bufsize,l.sym_end=3*(l.lit_bufsize-1),l.level=t,l.strategy=s,l.method=i,eD(e)};var eU={deflateInit:(e,t)=>eR(e,t,ef,15,8,ed),deflateInit2:eR,deflateReset:eD,deflateResetKeep:eB,deflateSetHeader:(e,t)=>eC(e)||2!==e.state.wrap?ei:(e.state.gzhead=t,ee),deflate:(e,t)=>{if(eC(e)||t>V||t<0)return e?ec(e,ei):ei;let i=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===i.status&&t!==Q)return ec(e,0===e.avail_out?en:ei);let r=i.last_flush;if(i.last_flush=t,0!==i.pending){if(em(e),0===e.avail_out)return i.last_flush=-1,ee}else if(0===e.avail_in&&e_(t)<=e_(r)&&t!==Q)return ec(e,en);if(666===i.status&&0!==e.avail_in)return ec(e,en);if(42===i.status&&0===i.wrap&&(i.status=113),42===i.status){let t=ef+(i.w_bits-8<<4)<<8;if(t|=(i.strategy>=el||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(t|=32),ev(i,t+=31-t%31),0!==i.strstart&&(ev(i,e.adler>>>16),ev(i,65535&e.adler)),e.adler=1,i.status=113,em(e),0!==i.pending)return i.last_flush=-1,ee}if(57===i.status){if(e.adler=0,eb(i,31),eb(i,139),eb(i,8),i.gzhead)eb(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),eb(i,255&i.gzhead.time),eb(i,i.gzhead.time>>8&255),eb(i,i.gzhead.time>>16&255),eb(i,i.gzhead.time>>24&255),eb(i,9===i.level?2:i.strategy>=el||i.level<2?4:0),eb(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(eb(i,255&i.gzhead.extra.length),eb(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=M(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69;else if(eb(i,0),eb(i,0),eb(i,0),eb(i,0),eb(i,0),eb(i,9===i.level?2:i.strategy>=el||i.level<2?4:0),eb(i,3),i.status=113,em(e),0!==i.pending)return i.last_flush=-1,ee}if(69===i.status){if(i.gzhead.extra){let t=i.pending,r=(65535&i.gzhead.extra.length)-i.gzindex;for(;i.pending+r>i.pending_buf_size;){let n=i.pending_buf_size-i.pending;if(i.pending_buf.set(i.gzhead.extra.subarray(i.gzindex,i.gzindex+n),i.pending),i.pending=i.pending_buf_size,i.gzhead.hcrc&&i.pending>t&&(e.adler=M(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex+=n,em(e),0!==i.pending)return i.last_flush=-1,ee;t=0,r-=n}let n=new Uint8Array(i.gzhead.extra);i.pending_buf.set(n.subarray(i.gzindex,i.gzindex+r),i.pending),i.pending+=r,i.gzhead.hcrc&&i.pending>t&&(e.adler=M(e.adler,i.pending_buf,i.pending-t,t)),i.gzindex=0}i.status=73}if(73===i.status){if(i.gzhead.name){let t,r=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>r&&(e.adler=M(e.adler,i.pending_buf,i.pending-r,r)),em(e),0!==i.pending)return i.last_flush=-1,ee;r=0}t=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,eb(i,t)}while(0!==t)i.gzhead.hcrc&&i.pending>r&&(e.adler=M(e.adler,i.pending_buf,i.pending-r,r)),i.gzindex=0}i.status=91}if(91===i.status){if(i.gzhead.comment){let t,r=i.pending;do{if(i.pending===i.pending_buf_size){if(i.gzhead.hcrc&&i.pending>r&&(e.adler=M(e.adler,i.pending_buf,i.pending-r,r)),em(e),0!==i.pending)return i.last_flush=-1,ee;r=0}t=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,eb(i,t)}while(0!==t)i.gzhead.hcrc&&i.pending>r&&(e.adler=M(e.adler,i.pending_buf,i.pending-r,r))}i.status=103}if(103===i.status){if(i.gzhead.hcrc){if(i.pending+2>i.pending_buf_size&&(em(e),0!==i.pending))return i.last_flush=-1,ee;eb(i,255&e.adler),eb(i,e.adler>>8&255),e.adler=0}if(i.status=113,em(e),0!==i.pending)return i.last_flush=-1,ee}if(0!==e.avail_in||0!==i.lookahead||t!==G&&666!==i.status){let r=0===i.level?eA(i,t):i.strategy===el?((e,t)=>{let i;for(;;){if(0===e.lookahead&&(ez(e),0===e.lookahead)){if(t===G)return 1;break}if(e.match_length=0,i=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,i&&(ey(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Q?(ey(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ey(e,!1),0===e.strm.avail_out)?1:2})(i,t):i.strategy===eo?((e,t)=>{let i,r,n,s;let a=e.window;for(;;){if(e.lookahead<=258){if(ez(e),e.lookahead<=258&&t===G)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=a[n=e.strstart-1])===a[++n]&&r===a[++n]&&r===a[++n]){s=e.strstart+258;do;while(r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&r===a[++n]&&n<s)e.match_length=258-(s-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(i=K(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(i=K(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),i&&(ey(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===Q?(ey(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(ey(e,!1),0===e.strm.avail_out)?1:2})(i,t):eI[i.level].func(i,t);if(3!==r&&4!==r||(i.status=666),1===r||3===r)return 0===e.avail_out&&(i.last_flush=-1),ee;if(2===r&&(t===X?J(i):t!==V&&(W(i,0,0,!1),t===Y&&(ep(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),em(e),0===e.avail_out))return i.last_flush=-1,ee}return t!==Q?ee:i.wrap<=0?et:(2===i.wrap?(eb(i,255&e.adler),eb(i,e.adler>>8&255),eb(i,e.adler>>16&255),eb(i,e.adler>>24&255),eb(i,255&e.total_in),eb(i,e.total_in>>8&255),eb(i,e.total_in>>16&255),eb(i,e.total_in>>24&255)):(ev(i,e.adler>>>16),ev(i,65535&e.adler)),em(e),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?ee:et)},deflateEnd:e=>{if(eC(e))return ei;let t=e.state.status;return e.state=null,113===t?ec(e,er):ee},deflateSetDictionary:(e,t)=>{let i=t.length;if(eC(e))return ei;let r=e.state,n=r.wrap;if(2===n||1===n&&42!==r.status||r.lookahead)return ei;if(1===n&&(e.adler=O(e.adler,t,i,0)),r.wrap=0,i>=r.w_size){0===n&&(ep(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(i-r.w_size,i),0),t=e,i=r.w_size}let s=e.avail_in,a=e.next_in,l=e.input;for(e.avail_in=i,e.next_in=0,e.input=t,ez(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do r.ins_h=eg(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++;while(--t)r.strstart=e,r.lookahead=2,ez(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=a,e.input=l,e.avail_in=s,r.wrap=n,ee},deflateInfo:"pako deflate (from Nodeca project)"};let eL=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var eN={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let i=t.shift();if(i){if("object"!=typeof i)throw TypeError(i+"must be non-object");for(let t in i)eL(i,t)&&(e[t]=i[t])}}return e},flattenChunks:e=>{let t=0;for(let i=0,r=e.length;i<r;i++)t+=e[i].length;let i=new Uint8Array(t);for(let t=0,r=0,n=e.length;t<n;t++){let n=e[t];i.set(n,r),r+=n.length}return i}};let eP=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){eP=!1}let eO=new Uint8Array(256);for(let e=0;e<256;e++)eO[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;eO[254]=eO[254]=1;var eZ={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,i,r,n,s,a=e.length,l=0;for(n=0;n<a;n++)55296==(64512&(i=e.charCodeAt(n)))&&n+1<a&&56320==(64512&(r=e.charCodeAt(n+1)))&&(i=65536+(i-55296<<10)+(r-56320),n++),l+=i<128?1:i<2048?2:i<65536?3:4;for(t=new Uint8Array(l),s=0,n=0;s<l;n++)55296==(64512&(i=e.charCodeAt(n)))&&n+1<a&&56320==(64512&(r=e.charCodeAt(n+1)))&&(i=65536+(i-55296<<10)+(r-56320),n++),i<128?t[s++]=i:(i<2048?t[s++]=192|i>>>6:(i<65536?t[s++]=224|i>>>12:(t[s++]=240|i>>>18,t[s++]=128|i>>>12&63),t[s++]=128|i>>>6&63),t[s++]=128|63&i);return t},buf2string:(e,t)=>{let i,r;let n=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let s=Array(2*n);for(r=0,i=0;i<n;){let t=e[i++];if(t<128){s[r++]=t;continue}let a=eO[t];if(a>4)s[r++]=65533,i+=a-1;else{for(t&=2===a?31:3===a?15:7;a>1&&i<n;)t=t<<6|63&e[i++],a--;a>1?s[r++]=65533:t<65536?s[r++]=t:(t-=65536,s[r++]=55296|t>>10&1023,s[r++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&eP)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let i="";for(let r=0;r<t;r++)i+=String.fromCharCode(e[r]);return i})(s,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let i=t-1;for(;i>=0&&128==(192&e[i]);)i--;return i<0||0===i?t:i+eO[e[i]]>t?i:t}},eM=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let e$=Object.prototype.toString,{Z_NO_FLUSH:ej,Z_SYNC_FLUSH:eH,Z_FULL_FLUSH:eW,Z_FINISH:eq,Z_OK:eK,Z_STREAM_END:eJ,Z_DEFAULT_COMPRESSION:eG,Z_DEFAULT_STRATEGY:eX,Z_DEFLATED:eY}=j;function eQ(e){this.options=eN.assign({level:eG,method:eY,chunkSize:16384,windowBits:15,memLevel:8,strategy:eX},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eM,this.strm.avail_out=0;let i=eU.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(i!==eK)throw Error($[i]);if(t.header&&eU.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?eZ.string2buf(t.dictionary):"[object ArrayBuffer]"===e$.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(i=eU.deflateSetDictionary(this.strm,e))!==eK)throw Error($[i]);this._dict_set=!0}}function eV(e,t){let i=new eQ(t);if(i.push(e,!0),i.err)throw i.msg||$[i.err];return i.result}eQ.prototype.push=function(e,t){let i,r;let n=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?eq:ej,"string"==typeof e?n.input=eZ.string2buf(e):"[object ArrayBuffer]"===e$.call(e)?n.input=new Uint8Array(e):n.input=e,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(s),n.next_out=0,n.avail_out=s),(r===eH||r===eW)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if((i=eU.deflate(n,r))===eJ)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),i=eU.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===eK;if(0!==n.avail_out){if(r>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},eQ.prototype.onData=function(e){this.chunks.push(e)},eQ.prototype.onEnd=function(e){e===eK&&(this.result=eN.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var e0=function(e,t){let i,r,n,s,a,l,o,h,d,u,f,c,_,p,w,g,m,y,b,v,k,x,z,A;let S=e.state;i=e.next_in,z=e.input,r=i+(e.avail_in-5),n=e.next_out,A=e.output,s=n-(t-e.avail_out),a=n+(e.avail_out-257),l=S.dmax,o=S.wsize,h=S.whave,d=S.wnext,u=S.window,f=S.hold,c=S.bits,_=S.lencode,p=S.distcode,w=(1<<S.lenbits)-1,g=(1<<S.distbits)-1;e:do for(c<15&&(f+=z[i++]<<c,c+=8,f+=z[i++]<<c,c+=8),m=_[f&w];;){if(f>>>=y=m>>>24,c-=y,0==(y=m>>>16&255))A[n++]=65535&m;else{if(!(16&y)){if(0==(64&y)){m=_[(65535&m)+(f&(1<<y)-1)];continue}if(32&y){S.mode=16191;break e}e.msg="invalid literal/length code",S.mode=16209;break e}for(b=65535&m,(y&=15)&&(c<y&&(f+=z[i++]<<c,c+=8),b+=f&(1<<y)-1,f>>>=y,c-=y),c<15&&(f+=z[i++]<<c,c+=8,f+=z[i++]<<c,c+=8),m=p[f&g];;){if(f>>>=y=m>>>24,c-=y,!(16&(y=m>>>16&255))){if(0==(64&y)){m=p[(65535&m)+(f&(1<<y)-1)];continue}e.msg="invalid distance code",S.mode=16209;break e}if(v=65535&m,c<(y&=15)&&(f+=z[i++]<<c,(c+=8)<y&&(f+=z[i++]<<c,c+=8)),(v+=f&(1<<y)-1)>l){e.msg="invalid distance too far back",S.mode=16209;break e}if(f>>>=y,c-=y,v>(y=n-s)){if((y=v-y)>h&&S.sane){e.msg="invalid distance too far back",S.mode=16209;break e}if(k=0,x=u,0===d){if(k+=o-y,y<b){b-=y;do A[n++]=u[k++];while(--y)k=n-v,x=A}}else if(d<y){if(k+=o+d-y,(y-=d)<b){b-=y;do A[n++]=u[k++];while(--y)if(k=0,d<b){b-=y=d;do A[n++]=u[k++];while(--y)k=n-v,x=A}}}else if(k+=d-y,y<b){b-=y;do A[n++]=u[k++];while(--y)k=n-v,x=A}for(;b>2;)A[n++]=x[k++],A[n++]=x[k++],A[n++]=x[k++],b-=3;b&&(A[n++]=x[k++],b>1&&(A[n++]=x[k++]))}else{k=n-v;do A[n++]=A[k++],A[n++]=A[k++],A[n++]=A[k++],b-=3;while(b>2)b&&(A[n++]=A[k++],b>1&&(A[n++]=A[k++]))}break}}break}while(i<r&&n<a)i-=b=c>>3,c-=b<<3,f&=(1<<c)-1,e.next_in=i,e.next_out=n,e.avail_in=i<r?r-i+5:5-(i-r),e.avail_out=n<a?a-n+257:257-(n-a),S.hold=f,S.bits=c};let e1=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),e2=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),e5=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),e6=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var e3=(e,t,i,r,n,s,a,l)=>{let o=l.bits,h,d,u,f,c,_,p=0,w=0,g=0,m=0,y=0,b=0,v=0,k=0,x=0,z=0,A=null,S=new Uint16Array(16),T=new Uint16Array(16),F,I,E,C=null;for(p=0;p<=15;p++)S[p]=0;for(w=0;w<r;w++)S[t[i+w]]++;for(y=o,m=15;m>=1&&0===S[m];m--);if(y>m&&(y=m),0===m)return n[s++]=20971520,n[s++]=20971520,l.bits=1,0;for(g=1;g<m&&0===S[g];g++);for(y<g&&(y=g),k=1,p=1;p<=15;p++)if(k<<=1,(k-=S[p])<0)return -1;if(k>0&&(0===e||1!==m))return -1;for(T[1]=0,p=1;p<15;p++)T[p+1]=T[p]+S[p];for(w=0;w<r;w++)0!==t[i+w]&&(a[T[t[i+w]]++]=w);if(0===e?(A=C=a,_=20):1===e?(A=e1,C=e2,_=257):(A=e5,C=e6,_=0),z=0,w=0,p=g,c=s,b=y,v=0,u=-1,f=(x=1<<y)-1,1===e&&x>852||2===e&&x>592)return 1;for(;;){F=p-v,a[w]+1<_?(I=0,E=a[w]):a[w]>=_?(I=C[a[w]-_],E=A[a[w]-_]):(I=96,E=0),h=1<<p-v,g=d=1<<b;do n[c+(z>>v)+(d-=h)]=F<<24|I<<16|E|0;while(0!==d)for(h=1<<p-1;z&h;)h>>=1;if(0!==h?(z&=h-1,z+=h):z=0,w++,0==--S[p]){if(p===m)break;p=t[i+a[w]]}if(p>y&&(z&f)!==u){for(0===v&&(v=y),c+=g,k=1<<(b=p-v);b+v<m&&!((k-=S[b+v])<=0);)b++,k<<=1;if(x+=1<<b,1===e&&x>852||2===e&&x>592)return 1;n[u=z&f]=y<<24|b<<16|c-s|0}}return 0!==z&&(n[c+z]=p-v<<24|4194304),l.bits=y,0};let{Z_FINISH:e8,Z_BLOCK:e4,Z_TREES:e9,Z_OK:e7,Z_STREAM_END:te,Z_NEED_DICT:tt,Z_STREAM_ERROR:ti,Z_DATA_ERROR:tr,Z_MEM_ERROR:tn,Z_BUF_ERROR:ts,Z_DEFLATED:ta}=j,tl=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function to(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let th=e=>{if(!e)return 1;let t=e.state;return!t||t.strm!==e||t.mode<16180||t.mode>16211?1:0},td=e=>{if(th(e))return ti;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,e7},tu=e=>{if(th(e))return ti;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,td(e)},tf=(e,t)=>{let i;if(th(e))return ti;let r=e.state;return t<0?(i=0,t=-t):(i=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?ti:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=i,r.wbits=t,tu(e))},tc=(e,t)=>{if(!e)return ti;let i=new to;e.state=i,i.strm=e,i.window=null,i.mode=16180;let r=tf(e,t);return r!==e7&&(e.state=null),r},t_,tp,tw=!0,tg=e=>{if(tw){t_=new Int32Array(512),tp=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(e3(1,e.lens,0,288,t_,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;e3(2,e.lens,0,32,tp,0,e.work,{bits:5}),tw=!1}e.lencode=t_,e.lenbits=9,e.distcode=tp,e.distbits=5},tm=(e,t,i,r)=>{let n;let s=e.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new Uint8Array(s.wsize)),r>=s.wsize?(s.window.set(t.subarray(i-s.wsize,i),0),s.wnext=0,s.whave=s.wsize):((n=s.wsize-s.wnext)>r&&(n=r),s.window.set(t.subarray(i-r,i-r+n),s.wnext),(r-=n)?(s.window.set(t.subarray(i-r,i),0),s.wnext=r,s.whave=s.wsize):(s.wnext+=n,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=n))),0};var ty={inflateReset:tu,inflateReset2:tf,inflateResetKeep:td,inflateInit:e=>tc(e,15),inflateInit2:tc,inflate:(e,t)=>{let i,r,n,s,a,l,o,h,d,u,f,c,_,p,w,g,m,y,b,v,k,x,z,A,S=0,T=new Uint8Array(4),F=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(th(e)||!e.output||!e.input&&0!==e.avail_in)return ti;16191===(n=e.state).mode&&(n.mode=16192),o=e.next_out,a=e.output,d=e.avail_out,l=e.next_in,s=e.input,h=e.avail_in,u=n.hold,f=n.bits,c=h,_=d,A=e7;e:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;f<16;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(2&n.wrap&&35615===u){0===n.wbits&&(n.wbits=15),n.check=0,T[0]=255&u,T[1]=u>>>8&255,n.check=M(n.check,T,2,0),u=0,f=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&u)!==ta){e.msg="unknown compression method",n.mode=16209;break}if(u>>>=4,f-=4,z=8+(15&u),0===n.wbits&&(n.wbits=z),z>15||z>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&u?16189:16191,u=0,f=0;break;case 16181:for(;f<16;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(n.flags=u,(255&n.flags)!==ta){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=u>>8&1),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=M(n.check,T,2,0)),u=0,f=0,n.mode=16182;case 16182:for(;f<32;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}n.head&&(n.head.time=u),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,T[2]=u>>>16&255,T[3]=u>>>24&255,n.check=M(n.check,T,4,0)),u=0,f=0,n.mode=16183;case 16183:for(;f<16;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}n.head&&(n.head.xflags=255&u,n.head.os=u>>8),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=M(n.check,T,2,0)),u=0,f=0,n.mode=16184;case 16184:if(1024&n.flags){for(;f<16;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}n.length=u,n.head&&(n.head.extra_len=u),512&n.flags&&4&n.wrap&&(T[0]=255&u,T[1]=u>>>8&255,n.check=M(n.check,T,2,0)),u=0,f=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((p=n.length)>h&&(p=h),p&&(n.head&&(z=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(s.subarray(l,l+p),z)),512&n.flags&&4&n.wrap&&(n.check=M(n.check,s,p,l)),h-=p,l+=p,n.length-=p),n.length))break e;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===h)break e;p=0;do z=s[l+p++],n.head&&z&&n.length<65536&&(n.head.name+=String.fromCharCode(z));while(z&&p<h)if(512&n.flags&&4&n.wrap&&(n.check=M(n.check,s,p,l)),h-=p,l+=p,z)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===h)break e;p=0;do z=s[l+p++],n.head&&z&&n.length<65536&&(n.head.comment+=String.fromCharCode(z));while(z&&p<h)if(512&n.flags&&4&n.wrap&&(n.check=M(n.check,s,p,l)),h-=p,l+=p,z)break e}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;f<16;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(4&n.wrap&&u!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}u=0,f=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;f<32;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}e.adler=n.check=tl(u),u=0,f=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=o,e.avail_out=d,e.next_in=l,e.avail_in=h,n.hold=u,n.bits=f,tt;e.adler=n.check=1,n.mode=16191;case 16191:if(t===e4||t===e9)break e;case 16192:if(n.last){u>>>=7&f,f-=7&f,n.mode=16206;break}for(;f<3;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}switch(n.last=1&u,f-=1,3&(u>>>=1)){case 0:n.mode=16193;break;case 1:if(tg(n),n.mode=16199,t===e9){u>>>=2,f-=2;break e}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}u>>>=2,f-=2;break;case 16193:for(u>>>=7&f,f-=7&f;f<32;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&u,u=0,f=0,n.mode=16194,t===e9)break e;case 16194:n.mode=16195;case 16195:if(p=n.length){if(p>h&&(p=h),p>d&&(p=d),0===p)break e;a.set(s.subarray(l,l+p),o),h-=p,l+=p,d-=p,o+=p,n.length-=p;break}n.mode=16191;break;case 16196:for(;f<14;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(n.nlen=257+(31&u),u>>>=5,f-=5,n.ndist=1+(31&u),u>>>=5,f-=5,n.ncode=4+(15&u),u>>>=4,f-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;f<3;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}n.lens[F[n.have++]]=7&u,u>>>=3,f-=3}for(;n.have<19;)n.lens[F[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,i={bits:n.lenbits},A=e3(0,n.lens,0,19,n.lencode,0,n.work,i),n.lenbits=i.bits,A){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;m=(S=n.lencode[u&(1<<n.lenbits)-1])>>>24,y=S>>>16&255,b=65535&S,!(m<=f);){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(b<16)u>>>=m,f-=m,n.lens[n.have++]=b;else{if(16===b){for(r=m+2;f<r;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(u>>>=m,f-=m,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}z=n.lens[n.have-1],p=3+(3&u),u>>>=2,f-=2}else if(17===b){for(r=m+3;f<r;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}u>>>=m,f-=m,z=0,p=3+(7&u),u>>>=3,f-=3}else{for(r=m+7;f<r;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}u>>>=m,f-=m,z=0,p=11+(127&u),u>>>=7,f-=7}if(n.have+p>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;p--;)n.lens[n.have++]=z}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,i={bits:n.lenbits},A=e3(1,n.lens,0,n.nlen,n.lencode,0,n.work,i),n.lenbits=i.bits,A){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,i={bits:n.distbits},A=e3(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,i),n.distbits=i.bits,A){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===e9)break e;case 16199:n.mode=16200;case 16200:if(h>=6&&d>=258){e.next_out=o,e.avail_out=d,e.next_in=l,e.avail_in=h,n.hold=u,n.bits=f,e0(e,_),o=e.next_out,a=e.output,d=e.avail_out,l=e.next_in,s=e.input,h=e.avail_in,u=n.hold,f=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;m=(S=n.lencode[u&(1<<n.lenbits)-1])>>>24,y=S>>>16&255,b=65535&S,!(m<=f);){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(y&&0==(240&y)){for(v=m,k=y,x=b;m=(S=n.lencode[x+((u&(1<<v+k)-1)>>v)])>>>24,y=S>>>16&255,b=65535&S,!(v+m<=f);){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}u>>>=v,f-=v,n.back+=v}if(u>>>=m,f-=m,n.back+=m,n.length=b,0===y){n.mode=16205;break}if(32&y){n.back=-1,n.mode=16191;break}if(64&y){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&y,n.mode=16201;case 16201:if(n.extra){for(r=n.extra;f<r;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}n.length+=u&(1<<n.extra)-1,u>>>=n.extra,f-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;m=(S=n.distcode[u&(1<<n.distbits)-1])>>>24,y=S>>>16&255,b=65535&S,!(m<=f);){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(0==(240&y)){for(v=m,k=y,x=b;m=(S=n.distcode[x+((u&(1<<v+k)-1)>>v)])>>>24,y=S>>>16&255,b=65535&S,!(v+m<=f);){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}u>>>=v,f-=v,n.back+=v}if(u>>>=m,f-=m,n.back+=m,64&y){e.msg="invalid distance code",n.mode=16209;break}n.offset=b,n.extra=15&y,n.mode=16203;case 16203:if(n.extra){for(r=n.extra;f<r;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}n.offset+=u&(1<<n.extra)-1,u>>>=n.extra,f-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===d)break e;if(p=_-d,n.offset>p){if((p=n.offset-p)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}p>n.wnext?(p-=n.wnext,w=n.wsize-p):w=n.wnext-p,p>n.length&&(p=n.length),g=n.window}else g=a,w=o-n.offset,p=n.length;p>d&&(p=d),d-=p,n.length-=p;do a[o++]=g[w++];while(--p)0===n.length&&(n.mode=16200);break;case 16205:if(0===d)break e;a[o++]=n.length,d--,n.mode=16200;break;case 16206:if(n.wrap){for(;f<32;){if(0===h)break e;h--,u|=s[l++]<<f,f+=8}if(_-=d,e.total_out+=_,n.total+=_,4&n.wrap&&_&&(e.adler=n.check=n.flags?M(n.check,a,_,o-_):O(n.check,a,_,o-_)),_=d,4&n.wrap&&(n.flags?u:tl(u))!==n.check){e.msg="incorrect data check",n.mode=16209;break}u=0,f=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;f<32;){if(0===h)break e;h--,u+=s[l++]<<f,f+=8}if(4&n.wrap&&u!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=16209;break}u=0,f=0}n.mode=16208;case 16208:A=te;break e;case 16209:A=tr;break e;case 16210:return tn;default:return ti}return e.next_out=o,e.avail_out=d,e.next_in=l,e.avail_in=h,n.hold=u,n.bits=f,(n.wsize||_!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==e8))&&tm(e,e.output,e.next_out,_-e.avail_out),c-=e.avail_in,_-=e.avail_out,e.total_in+=c,e.total_out+=_,n.total+=_,4&n.wrap&&_&&(e.adler=n.check=n.flags?M(n.check,a,_,e.next_out-_):O(n.check,a,_,e.next_out-_)),e.data_type=n.bits+(n.last?64:0)+(16191===n.mode?128:0)+(16199===n.mode||16194===n.mode?256:0),(0===c&&0===_||t===e8)&&A===e7&&(A=ts),A},inflateEnd:e=>{if(th(e))return ti;let t=e.state;return t.window&&(t.window=null),e.state=null,e7},inflateGetHeader:(e,t)=>{if(th(e))return ti;let i=e.state;return 0==(2&i.wrap)?ti:(i.head=t,t.done=!1,e7)},inflateSetDictionary:(e,t)=>{let i;let r=t.length;return th(e)?ti:0!==(i=e.state).wrap&&16190!==i.mode?ti:16190===i.mode&&O(1,t,r,0)!==i.check?tr:tm(e,t,r,r)?(i.mode=16210,tn):(i.havedict=1,e7)},inflateInfo:"pako inflate (from Nodeca project)"},tb=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let tv=Object.prototype.toString,{Z_NO_FLUSH:tk,Z_FINISH:tx,Z_OK:tz,Z_STREAM_END:tA,Z_NEED_DICT:tS,Z_STREAM_ERROR:tT,Z_DATA_ERROR:tF,Z_MEM_ERROR:tI}=j;function tE(e){this.options=eN.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new eM,this.strm.avail_out=0;let i=ty.inflateInit2(this.strm,t.windowBits);if(i!==tz||(this.header=new tb,ty.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=eZ.string2buf(t.dictionary):"[object ArrayBuffer]"===tv.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(i=ty.inflateSetDictionary(this.strm,t.dictionary))!==tz)))throw Error($[i])}function tC(e,t){let i=new tE(t);if(i.push(e),i.err)throw i.msg||$[i.err];return i.result}tE.prototype.push=function(e,t){let i,r,n;let s=this.strm,a=this.options.chunkSize,l=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?tx:tk,"[object ArrayBuffer]"===tv.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(a),s.next_out=0,s.avail_out=a),(i=ty.inflate(s,r))===tS&&l&&((i=ty.inflateSetDictionary(s,l))===tz?i=ty.inflate(s,r):i===tF&&(i=tS));s.avail_in>0&&i===tA&&s.state.wrap>0&&0!==e[s.next_in];)ty.inflateReset(s),i=ty.inflate(s,r);switch(i){case tT:case tF:case tS:case tI:return this.onEnd(i),this.ended=!0,!1}if(n=s.avail_out,s.next_out&&(0===s.avail_out||i===tA)){if("string"===this.options.to){let e=eZ.utf8border(s.output,s.next_out),t=s.next_out-e,i=eZ.buf2string(s.output,e);s.next_out=t,s.avail_out=a-t,t&&s.output.set(s.output.subarray(e,e+t),0),this.onData(i)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out))}if(i!==tz||0!==n){if(i===tA)return i=ty.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},tE.prototype.onData=function(e){this.chunks.push(e)},tE.prototype.onEnd=function(e){e===tz&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=eN.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:tB,deflate:tD,deflateRaw:tR,gzip:tU}={Deflate:eQ,deflate:eV,deflateRaw:function(e,t){return(t=t||{}).raw=!0,eV(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,eV(e,t)},constants:j},{Inflate:tL,inflate:tN,inflateRaw:tP,ungzip:tO}={Inflate:tE,inflate:tC,inflateRaw:function(e,t){return(t=t||{}).raw=!0,tC(e,t)},ungzip:tC,constants:j};for(var tZ={Deflate:tB,deflate:tD,deflateRaw:tR,gzip:tU,Inflate:tL,inflate:tN,inflateRaw:tP,ungzip:tO,constants:j},tM=function(e){var t,i,r=function(e){var t=e.length;if(t%4>0)throw Error("Invalid string. Length must be a multiple of 4");var i=e.indexOf("=");-1===i&&(i=t);var r=i===t?0:4-i%4;return[i,r]}(e),n=r[0],s=r[1],a=new tW(3*(n+s)/4-s),l=0,o=s>0?n-4:n;for(i=0;i<o;i+=4)t=tH[e.charCodeAt(i)]<<18|tH[e.charCodeAt(i+1)]<<12|tH[e.charCodeAt(i+2)]<<6|tH[e.charCodeAt(i+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;return 2===s&&(t=tH[e.charCodeAt(i)]<<2|tH[e.charCodeAt(i+1)]>>4,a[l++]=255&t),1===s&&(t=tH[e.charCodeAt(i)]<<10|tH[e.charCodeAt(i+1)]<<4|tH[e.charCodeAt(i+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t),a},t$=function(e){for(var t,i=e.length,r=i%3,n=[],s=0,a=i-r;s<a;s+=16383)n.push(function(e,t,i){for(var r,n=[],s=t;s<i;s+=3)n.push(tj[(r=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]))>>18&63]+tj[r>>12&63]+tj[r>>6&63]+tj[63&r]);return n.join("")}(e,s,s+16383>a?a:s+16383));return 1===r?n.push(tj[(t=e[i-1])>>2]+tj[t<<4&63]+"=="):2===r&&n.push(tj[(t=(e[i-2]<<8)+e[i-1])>>10]+tj[t>>4&63]+tj[t<<2&63]+"="),n.join("")},tj=[],tH=[],tW="undefined"!=typeof Uint8Array?Uint8Array:Array,tq="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",tK=0;tK<64;++tK)tj[tK]=tq[tK],tH[tq.charCodeAt(tK)]=tK;tH["-".charCodeAt(0)]=62,tH["_".charCodeAt(0)]=63,function(){try{n.platform}catch(e){return!1}}();let tJ=function(){try{if("fs"===(void 0)("fs"))return r("kjyEk"),!1}catch(e){}return!0}();function tG(e){return Uint8Array.from(e,e=>e.charCodeAt(0))}function tX(e,t="binary"){return l(this,void 0,void 0,function*(){return"function"==typeof s?s.from(e).toString(t):new Promise(i=>{let r=new FileReader;r.onloadend=()=>i(r.result),"binary"==t?r.readAsBinaryString(new Blob([e])):r.readAsText(new Blob([e]),t)})})}let tY="function"==typeof s;function tQ(e){let t=tZ.deflate(e);return tY?s.from(t).toString("base64"):t$(t)}function tV(e){let t;return t=tY?s.from(e,"base64"):tM(e),tZ.inflate(t)}class t0 extends Error{constructor(e,t=null,i=!1){if("fail"===t||"FAIL"===t||"EXIT"===t)try{e=(new TextDecoder).decode(tV(e))}catch(t){e=`decode [${e}] error: ${t}`}else t&&(e=`[TrzszError] ${t}: ${e}`);super(e),Object.setPrototypeOf(this,t0.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,t0),this.name="TrzszError",this.type=t,this.trace=i}isTraceBack(){return"fail"!==this.type&&"EXIT"!==this.type&&this.trace}isRemoteExit(){return"EXIT"===this.type}isRemoteFail(){return"fail"===this.type||"FAIL"===this.type}isStopAndDelete(){return"fail"===this.type&&"Stopped and deleted"===this.message}static getErrorMessage(e){return e instanceof t0&&!e.isTraceBack()?e.message:e.stack?e.stack.replace("TrzszError: ",""):e.toString()}}function t1(e){return 97<=e&&e<=122||65<=e&&e<=90}function t2(e,t){let i=`Saved ${e.length} ${e.length>1?"files/directories":"file/directory"}`;return t.length>0&&(i+=` to ${t}`),[i].concat(e).join("\r\n- ")}let t5=t3("fs"),t6=t3("path");function t3(e){try{return require(e)}catch(e){return{}}}(function(e,t){for(let i of t)e[i+"Async"]=(...t)=>new Promise(r=>{e[i](...t,e=>r(!e))})})(t5,["rm","rmdir","unlink","access"]),function(e,t){for(let i of t)e[i+"Async"]=(...t)=>new Promise((r,n)=>{e[i](...t,(e,t)=>{e?n(e):r(t)})})}(t5,["stat","mkdir","readdir","close","open","realpath","write"]);class t8{constructor(e,t,i,r,n){this.closed=!1,this.fd=null,this.pathId=e,this.absPath=t,this.relPath=i,this.dir=r,this.size=n}getPathId(){return this.pathId}getRelPath(){return this.relPath}isDir(){return this.dir}getSize(){return this.size}readFile(e){return l(this,void 0,void 0,function*(){if(this.closed)throw new t0(`File closed: ${this.absPath}`,null,!0);null===this.fd&&(this.fd=yield t5.openAsync(this.absPath,"r"));let t=new Uint8Array(e);return function(e,t,i,r,n){return l(this,void 0,void 0,function*(){return new Promise((i,n)=>t5.read(e,t,0,r,null,(e,t,r)=>{e?n(e):i(r.subarray(0,t))}))})}(this.fd,t,0,t.length,0)})}closeFile(){return l(this,void 0,void 0,function*(){this.closed||(this.closed=!0,null!==this.fd&&(yield t5.closeAsync(this.fd),this.fd=null))})}}function t4(e,t=!1){return l(this,void 0,void 0,function*(){if(!e||!e.length)return;let i=[];for(let[r,n]of e.entries()){let e=t6.resolve(n);if(!(yield t5.accessAsync(e)))throw new t0(`No such file: ${e}`);let s=yield t5.statAsync(e);if(!t&&s.isDirectory())throw new t0(`Is a directory: ${e}`);let a=new Set;yield function e(t,i,r,n,s,a){return l(this,void 0,void 0,function*(){if(!r.isDirectory()){if(!r.isFile())throw new t0(`Not a regular file: ${i}`);if(!(yield t5.accessAsync(i,t5.constants.R_OK)))throw new t0(`No permission to read: ${i}`);return void n.push(new t8(t,i,s,!1,r.size))}let l=yield t5.realpathAsync(i);if(a.has(l))throw new t0(`Duplicate link: ${i}`);for(let r of(a.add(l),n.push(new t8(t,i,s,!0,0)),yield t5.readdirAsync(i))){let l=t6.join(i,r),o=yield t5.statAsync(l);yield e(t,l,o,n,[...s,r],a)}})}(r,e,s,i,[t6.basename(e)],a)}return i})}class t9{constructor(e,t,i,r,n=!1){this.closed=!1,this.absPath=e,this.fileName=t,this.localName=i,this.fd=r,this.dir=n}getFileName(){return this.fileName}getLocalName(){return this.localName}isDir(){return this.dir}writeFile(e){return l(this,void 0,void 0,function*(){yield t5.writeAsync(this.fd,e)})}closeFile(){return l(this,void 0,void 0,function*(){this.closed||(this.closed=!0,null!==this.fd&&(yield t5.closeAsync(this.fd),this.fd=null))})}deleteFile(){return l(this,void 0,void 0,function*(){if(!this.absPath||!(yield t5.accessAsync(this.absPath)))return"";try{if(yield this.closeFile(),"function"==typeof t5.rm){if(yield t5.rmAsync(this.absPath,{recursive:!0}))return this.absPath}else if(this.isDir){if(yield t5.rmdirAsync(this.absPath,{recursive:!0}))return this.absPath}else if(yield t5.unlinkAsync(this.absPath))return this.absPath}catch(e){console.log(`delete [${this.absPath}] failed`,e)}return""})}}function t7(e,t){return l(this,void 0,void 0,function*(){if(!(yield t5.accessAsync(t6.join(e,t))))return t;for(let i=0;i<1e3;i++){let r=`${t}.${i}`;if(!(yield t5.accessAsync(t6.join(e,r))))return r}throw new t0("Fail to assign new file name")})}function ie(e){return l(this,void 0,void 0,function*(){try{return yield t5.openAsync(e,"w")}catch(t){if(-13===t.errno||-4048===t.errno)throw new t0(`No permission to write: ${e}`);if(-21===t.errno||-4068===t.errno)throw new t0(`Is a directory: ${e}`);throw t}})}function it(e){return l(this,void 0,void 0,function*(){if(!(yield t5.accessAsync(e)))return yield t5.mkdirAsync(e,{recursive:!0,mode:493}),!0;if(!(yield t5.statAsync(e)).isDirectory())throw new t0(`Not a directory: ${e}`);return!1})}function ii(e,t,i,r){return l(this,void 0,void 0,function*(){let n,s;if(!i)return function(e,t,i){return l(this,void 0,void 0,function*(){let r=i?t:yield t7(e,t),n=t6.join(e,r),s=yield ie(n);return new t9(n,t,r,s)})}(e.path,t,r);let a=JSON.parse(t);if(!a.hasOwnProperty("path_name")||!a.hasOwnProperty("path_id")||!a.hasOwnProperty("is_dir")||a.path_name.length<1)throw new t0(`Invalid name: ${t}`);if(t=a.path_name[a.path_name.length-1],r?n=a.path_name[0]:e.maps.has(a.path_id)?n=e.maps.get(a.path_id):(n=yield t7(e.path,a.path_name[0]),e.maps.set(a.path_id,n)),a.path_name.length>1){let i=t6.join(e.path,n,...a.path_name.slice(1,a.path_name.length-1));yield it(i),s=t6.join(i,t)}else s=t6.join(e.path,n);if(!0===a.is_dir){let e="";return(yield it(s))&&(e=s),new t9(e,t,n,null,!0)}let o=yield ie(s);return new t9(s,t,n,o)})}class ir{constructor(e,t,i,r){this.closed=!1,this.pos=0,this.pathId=e,this.relPath=t,this.file=i,this.dir=r}getPathId(){return this.pathId}getRelPath(){return this.relPath}isDir(){return this.dir}getSize(){return this.file.size}readFile(e){return l(this,void 0,void 0,function*(){if(this.pos>=this.file.size)return new Uint8Array(0);try{let t=Math.min(e.byteLength,this.file.size-this.pos),i=this.file.slice(this.pos,this.pos+t);return this.pos+=t,new Uint8Array((yield i.arrayBuffer()))}catch(e){if("NotReadableError"===e.name)throw new t0(`No permission to read: ${this.relPath.join("/")}`);throw new t0(`Read ${this.relPath.join("/")} error: ${e.toString()}`)}})}closeFile(){this.closed||(this.file=null,this.closed=!0)}}function is(){return new t0("https:"===window.location.protocol||["localhost","127.0.0.1","[::1]"].includes(window.location.hostname)?"The browser doesn't support the File System Access API":"The File System Access API requires HTTPS except localhost")}class ia{constructor(e,t,i,r=!1){this.closed=!1,this.fileName=e,this.localName=t,this.writer=i,this.dir=r}getFileName(){return this.fileName}getLocalName(){return this.localName}isDir(){return this.dir}writeFile(e){return l(this,void 0,void 0,function*(){yield this.writer.write(e)})}closeFile(){this.closed||(this.writer.close(),this.writer=null,this.closed=!0)}deleteFile(){return l(this,void 0,void 0,function*(){return""})}}function il(e,t){var i,r,n,s;return l(this,void 0,void 0,function*(){let a=new Set;try{for(var l,h=!0,d=o(e.values());!(i=(l=yield d.next()).done);h=!0)s=l.value,h=!1,a.add(s.name)}catch(e){r={error:e}}finally{try{!h&&!i&&(n=d.return)&&(yield n.call(d))}finally{if(r)throw r.error}}if(!a.has(t))return t;for(let e=0;e<1e3;e++){let i=`${t}.${e}`;if(!a.has(i))return i}})}function io(e,t){return l(this,void 0,void 0,function*(){try{let i=yield e.getFileHandle(t[t.length-1],{create:!0});return yield i.createWritable()}catch(e){if("NoModificationAllowedError"===e.name)throw new t0(`No permission to write: ${t.join("/")}`);if("TypeMismatchError"===e.name)throw new t0(`Is a directory: ${t.join("/")}`);throw new t0(`Write ${t.join("/")} error: ${e.toString()}`)}})}function ih(e,t){return l(this,void 0,void 0,function*(){try{return yield e.getDirectoryHandle(t[t.length-1],{create:!0})}catch(e){if("InvalidStateError"===e.name)throw new t0(`No permission to create: ${t.join("/")}`);if("TypeMismatchError"===e.name)throw new t0(`Not a directory: ${t.join("/")}`);throw new t0(`Create ${t.join("/")} error: ${e.toString()}`)}})}function id(e,t,i,r){return l(this,void 0,void 0,function*(){let n;let s=e.handle;if(!i)return yield function(e,t,i){return l(this,void 0,void 0,function*(){let r=i?t:yield il(e,t),n=yield io(e,[e.name,r]);return new ia(t,r,n)})}(s,t,r);let a=JSON.parse(t);if(!a.hasOwnProperty("path_name")||!a.hasOwnProperty("path_id")||!a.hasOwnProperty("is_dir")||a.path_name.length<1)throw new t0(`Invalid name: ${t}`);t=a.path_name[a.path_name.length-1],r?n=a.path_name[0]:e.maps.has(a.path_id)?n=e.maps.get(a.path_id):(n=yield il(s,a.path_name[0]),e.maps.set(a.path_id,n));let o=s,h=[s.name,n];if(a.path_name.length>1){o=yield ih(o,h);for(let e=1;e<a.path_name.length-1;e++)h.push(a.path_name[e]),o=yield ih(o,h);h.push(t)}if(!0===a.is_dir)return yield ih(o,h),new ia(t,n,null,!0);let d=yield a.readAsBuffer(),u=new Blob([d],{type:"application/octet-stream"}),f=document.createElement("a");f.href=URL.createObjectURL(u),f.download=a.name,document.body.appendChild(f),f.click(),document.body.removeChild(f);let c=yield io(o,h);return new ia(t,n,c)})}class iu{constructor(){this._dataLength=0,this._bufferLength=0,this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}static hashStr(e,t=!1){return this.onePassHasher.start().appendStr(e).end(t)}static hashAsciiStr(e,t=!1){return this.onePassHasher.start().appendAsciiStr(e).end(t)}static _hex(e){let t,i,r,n;let s=iu.hexChars,a=iu.hexOut;for(n=0;n<4;n+=1)for(i=8*n,t=e[n],r=0;r<8;r+=2)a[i+1+r]=s.charAt(15&t),t>>>=4,a[i+0+r]=s.charAt(15&t),t>>>=4;return a.join("")}static _md5cycle(e,t){let i=e[0],r=e[1],n=e[2],s=e[3];i+=(r&n|~r&s)+t[0]-680876936|0,s+=((i=(i<<7|i>>>25)+r|0)&r|~i&n)+t[1]-389564586|0,n+=((s=(s<<12|s>>>20)+i|0)&i|~s&r)+t[2]+606105819|0,r+=((n=(n<<17|n>>>15)+s|0)&s|~n&i)+t[3]-1044525330|0,i+=((r=(r<<22|r>>>10)+n|0)&n|~r&s)+t[4]-176418897|0,s+=((i=(i<<7|i>>>25)+r|0)&r|~i&n)+t[5]+1200080426|0,n+=((s=(s<<12|s>>>20)+i|0)&i|~s&r)+t[6]-1473231341|0,r+=((n=(n<<17|n>>>15)+s|0)&s|~n&i)+t[7]-45705983|0,i+=((r=(r<<22|r>>>10)+n|0)&n|~r&s)+t[8]+1770035416|0,s+=((i=(i<<7|i>>>25)+r|0)&r|~i&n)+t[9]-1958414417|0,n+=((s=(s<<12|s>>>20)+i|0)&i|~s&r)+t[10]-42063|0,r+=((n=(n<<17|n>>>15)+s|0)&s|~n&i)+t[11]-1990404162|0,i+=((r=(r<<22|r>>>10)+n|0)&n|~r&s)+t[12]+1804603682|0,s+=((i=(i<<7|i>>>25)+r|0)&r|~i&n)+t[13]-40341101|0,n+=((s=(s<<12|s>>>20)+i|0)&i|~s&r)+t[14]-1502002290|0,r+=((n=(n<<17|n>>>15)+s|0)&s|~n&i)+t[15]+1236535329|0,i+=((r=(r<<22|r>>>10)+n|0)&s|n&~s)+t[1]-165796510|0,s+=((i=(i<<5|i>>>27)+r|0)&n|r&~n)+t[6]-1069501632|0,n+=((s=(s<<9|s>>>23)+i|0)&r|i&~r)+t[11]+643717713|0,r+=((n=(n<<14|n>>>18)+s|0)&i|s&~i)+t[0]-373897302|0,i+=((r=(r<<20|r>>>12)+n|0)&s|n&~s)+t[5]-701558691|0,s+=((i=(i<<5|i>>>27)+r|0)&n|r&~n)+t[10]+38016083|0,n+=((s=(s<<9|s>>>23)+i|0)&r|i&~r)+t[15]-660478335|0,r+=((n=(n<<14|n>>>18)+s|0)&i|s&~i)+t[4]-405537848|0,i+=((r=(r<<20|r>>>12)+n|0)&s|n&~s)+t[9]+568446438|0,s+=((i=(i<<5|i>>>27)+r|0)&n|r&~n)+t[14]-1019803690|0,n+=((s=(s<<9|s>>>23)+i|0)&r|i&~r)+t[3]-187363961|0,r+=((n=(n<<14|n>>>18)+s|0)&i|s&~i)+t[8]+1163531501|0,i+=((r=(r<<20|r>>>12)+n|0)&s|n&~s)+t[13]-1444681467|0,s+=((i=(i<<5|i>>>27)+r|0)&n|r&~n)+t[2]-51403784|0,n+=((s=(s<<9|s>>>23)+i|0)&r|i&~r)+t[7]+1735328473|0,r+=((n=(n<<14|n>>>18)+s|0)&i|s&~i)+t[12]-1926607734|0,i+=((r=(r<<20|r>>>12)+n|0)^n^s)+t[5]-378558|0,s+=((i=(i<<4|i>>>28)+r|0)^r^n)+t[8]-2022574463|0,n+=((s=(s<<11|s>>>21)+i|0)^i^r)+t[11]+1839030562|0,r+=((n=(n<<16|n>>>16)+s|0)^s^i)+t[14]-35309556|0,i+=((r=(r<<23|r>>>9)+n|0)^n^s)+t[1]-1530992060|0,s+=((i=(i<<4|i>>>28)+r|0)^r^n)+t[4]+1272893353|0,n+=((s=(s<<11|s>>>21)+i|0)^i^r)+t[7]-155497632|0,r+=((n=(n<<16|n>>>16)+s|0)^s^i)+t[10]-1094730640|0,i+=((r=(r<<23|r>>>9)+n|0)^n^s)+t[13]+681279174|0,s+=((i=(i<<4|i>>>28)+r|0)^r^n)+t[0]-358537222|0,n+=((s=(s<<11|s>>>21)+i|0)^i^r)+t[3]-722521979|0,r+=((n=(n<<16|n>>>16)+s|0)^s^i)+t[6]+76029189|0,i+=((r=(r<<23|r>>>9)+n|0)^n^s)+t[9]-640364487|0,s+=((i=(i<<4|i>>>28)+r|0)^r^n)+t[12]-421815835|0,n+=((s=(s<<11|s>>>21)+i|0)^i^r)+t[15]+530742520|0,r+=((n=(n<<16|n>>>16)+s|0)^s^i)+t[2]-995338651|0,r=(r<<23|r>>>9)+n|0,i+=(n^(r|~s))+t[0]-198630844|0,i=(i<<6|i>>>26)+r|0,s+=(r^(i|~n))+t[7]+1126891415|0,s=(s<<10|s>>>22)+i|0,n+=(i^(s|~r))+t[14]-1416354905|0,n=(n<<15|n>>>17)+s|0,r+=(s^(n|~i))+t[5]-57434055|0,r=(r<<21|r>>>11)+n|0,i+=(n^(r|~s))+t[12]+1700485571|0,i=(i<<6|i>>>26)+r|0,s+=(r^(i|~n))+t[3]-1894986606|0,s=(s<<10|s>>>22)+i|0,n+=(i^(s|~r))+t[10]-1051523|0,n=(n<<15|n>>>17)+s|0,r+=(s^(n|~i))+t[1]-2054922799|0,r=(r<<21|r>>>11)+n|0,i+=(n^(r|~s))+t[8]+1873313359|0,i=(i<<6|i>>>26)+r|0,s+=(r^(i|~n))+t[15]-30611744|0,s=(s<<10|s>>>22)+i|0,n+=(i^(s|~r))+t[6]-1560198380|0,n=(n<<15|n>>>17)+s|0,r+=(s^(n|~i))+t[13]+1309151649|0,r=(r<<21|r>>>11)+n|0,i+=(n^(r|~s))+t[4]-145523070|0,i=(i<<6|i>>>26)+r|0,s+=(r^(i|~n))+t[11]-1120210379|0,s=(s<<10|s>>>22)+i|0,n+=(i^(s|~r))+t[2]+718787259|0,n=(n<<15|n>>>17)+s|0,r+=(s^(n|~i))+t[9]-343485551|0,r=(r<<21|r>>>11)+n|0,e[0]=i+e[0]|0,e[1]=r+e[1]|0,e[2]=n+e[2]|0,e[3]=s+e[3]|0}start(){return this._dataLength=0,this._bufferLength=0,this._state.set(iu.stateIdentity),this}appendStr(e){let t=this._buffer8,i=this._buffer32,r,n,s=this._bufferLength;for(n=0;n<e.length;n+=1){if((r=e.charCodeAt(n))<128)t[s++]=r;else if(r<2048)t[s++]=192+(r>>>6),t[s++]=63&r|128;else if(r<55296||r>56319)t[s++]=224+(r>>>12),t[s++]=r>>>6&63|128,t[s++]=63&r|128;else{if((r=1024*(r-55296)+(e.charCodeAt(++n)-56320)+65536)>1114111)throw Error("Unicode standard supports code points up to U+10FFFF");t[s++]=240+(r>>>18),t[s++]=r>>>12&63|128,t[s++]=r>>>6&63|128,t[s++]=63&r|128}s>=64&&(this._dataLength+=64,iu._md5cycle(this._state,i),s-=64,i[0]=i[16])}return this._bufferLength=s,this}appendAsciiStr(e){let t=this._buffer8,i=this._buffer32,r,n=this._bufferLength,s=0;for(;;){for(r=Math.min(e.length-s,64-n);r--;)t[n++]=e.charCodeAt(s++);if(n<64)break;this._dataLength+=64,iu._md5cycle(this._state,i),n=0}return this._bufferLength=n,this}appendByteArray(e){let t=this._buffer8,i=this._buffer32,r,n=this._bufferLength,s=0;for(;;){for(r=Math.min(e.length-s,64-n);r--;)t[n++]=e[s++];if(n<64)break;this._dataLength+=64,iu._md5cycle(this._state,i),n=0}return this._bufferLength=n,this}getState(){let e=this._state;return{buffer:String.fromCharCode.apply(null,Array.from(this._buffer8)),buflen:this._bufferLength,length:this._dataLength,state:[e[0],e[1],e[2],e[3]]}}setState(e){let t;let i=e.buffer,r=e.state,n=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],t=0;t<i.length;t+=1)this._buffer8[t]=i.charCodeAt(t)}end(e=!1){let t=this._bufferLength,i=this._buffer8,r=this._buffer32,n=1+(t>>2);this._dataLength+=t;let s=8*this._dataLength;if(i[t]=128,i[t+1]=i[t+2]=i[t+3]=0,r.set(iu.buffer32Identity.subarray(n),n),t>55&&(iu._md5cycle(this._state,r),r.set(iu.buffer32Identity)),s<=4294967295)r[14]=s;else{let e=s.toString(16).match(/(.*?)(.{0,8})$/);if(null===e)return;let t=parseInt(e[2],16),i=parseInt(e[1],16)||0;r[14]=t,r[15]=i}return iu._md5cycle(this._state,r),e?this._state:iu._hex(this._state)}}if(iu.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),iu.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),iu.hexChars="0123456789abcdef",iu.hexOut=[],iu.onePassHasher=new iu,"5d41402abc4b2a76b9719d911017c592"!==iu.hashStr("hello"))throw Error("Md5 self test failed.");class ic{constructor(){this.bufArray=[],this.resolve=null,this.reject=null,this.bufHead=0,this.bufTail=0,this.nextIdx=0,this.nextBuf=null,this.arrBuf=new ArrayBuffer(128)}addBuffer(e){this.bufArray[this.bufTail++]=e,this.resolve&&(this.resolve(),this.resolve=null,this.reject=null)}stopBuffer(){this.reject&&(this.reject(new t0("Stopped")),this.reject=null,this.resolve=null)}drainBuffer(){this.bufArray=[],this.bufHead=0,this.bufTail=0}toUint8Array(e){return l(this,void 0,void 0,function*(){if("string"==typeof e)return tG(e);if(e instanceof ArrayBuffer)return new Uint8Array(e);if(e instanceof Uint8Array)return e;if(e instanceof Blob){let t=yield e.arrayBuffer();return new Uint8Array(t)}throw new t0("The buffer type is not supported",null,!0)})}nextBuffer(){return l(this,void 0,void 0,function*(){if(this.nextBuf&&this.nextIdx<this.nextBuf.length)return this.nextBuf.subarray(this.nextIdx);this.bufHead===this.bufTail&&(0!==this.bufHead&&(this.bufHead=0,this.bufTail=0),yield new Promise((e,t)=>{this.resolve=e,this.reject=t}));let e=this.bufArray[this.bufHead];return this.bufArray[this.bufHead]=null,this.bufHead++,this.nextBuf=yield this.toUint8Array(e),this.nextIdx=0,this.nextBuf})}growBuffer(e,t,i){let r=Math.max(2*e.length,t+i);this.arrBuf=new ArrayBuffer(r);let n=new Uint8Array(this.arrBuf);return n.set(e.subarray(0,t)),n}appendBuffer(e,t,i){let r=e.length>=t+i.length?e:this.growBuffer(e,t,i.length);return r.set(i,t),r}readLine(){return l(this,void 0,void 0,function*(){let e=new Uint8Array(this.arrBuf),t=0;for(;;){let i=yield this.nextBuffer(),r=i.indexOf(10);if(r>=0?(this.nextIdx+=r+1,i=i.subarray(0,r)):this.nextIdx+=i.length,i.includes(3))throw new t0("Interrupted");if(e=this.appendBuffer(e,t,i),t+=i.length,r>=0)return tX(e.subarray(0,t))}})}readBinary(e){return l(this,void 0,void 0,function*(){this.arrBuf.byteLength<e&&(this.arrBuf=new ArrayBuffer(e));let t=new Uint8Array(this.arrBuf,0,e),i=0;for(;i<e;){let r=e-i,n=yield this.nextBuffer();n.length>r?(this.nextIdx+=r,n=n.subarray(0,r)):this.nextIdx+=n.length,t.set(n,i),i+=n.length}return t})}readLineOnWindows(){return l(this,void 0,void 0,function*(){let e=new Uint8Array(this.arrBuf),t=27,i=!1,r=!1,n=!1,s=!1,a=!1,l=0;for(;;){let o=yield this.nextBuffer(),h=o.indexOf(33);h>=0?(this.nextIdx+=h+1,o=o.subarray(0,h)):this.nextIdx+=o.length;for(let h=0;h<o.length;h++){let d=o[h];if(3==d)throw new t0("Interrupted");if(10==d&&(r=!0),i)t1(d)&&(i=!1,72==d&&t>=48&&t<=57&&(n=!0)),91==t&&72==d&&(s=!0),t=d;else if(27==d)i=!0,t=d;else if(97<=d&&d<=122||65<=d&&d<=90||48<=d&&d<=57||35==d||58==d||43==d||47==d||61==d){if(n&&(n=!1,r&&l>0&&(d==e[l-1]||a))){e[l-1]=d;continue}l>=e.length&&(e=this.growBuffer(e,l,o.length)),e[l++]=d,a=s,s=!1,r=!1}}if(h>=0&&l>0&&!i)return tX(e.subarray(0,l))}})}}function i_(e){let t=[];for(let i=0;i<e.length;i++)t.push([e[i][0].charCodeAt(0),e[i][1].charCodeAt(0),e[i][1].charCodeAt(1)]);return t}class ip{constructor(e,t=!1){this.buffer=new ic,this.remoteIsWindows=!1,this.lastInputTime=0,this.openedFiles=[],this.createdFiles=[],this.tmuxOutputJunk=!1,this.cleanTimeoutInMilliseconds=100,this.transferConfig={},this.stopped=!1,this.maxChunkTimeInMilliseconds=0,this.protocolNewline="\n",this.writer=e,this.isWindowsShell=t}cleanup(){for(let e of this.openedFiles)e.closeFile()}addReceivedData(e){this.stopped||this.buffer.addBuffer(e),this.lastInputTime=Date.now()}stopTransferring(){return l(this,void 0,void 0,function*(){this.cleanTimeoutInMilliseconds=Math.max(2*this.maxChunkTimeInMilliseconds,500),this.stopped=!0,this.buffer.stopBuffer()})}cleanInput(e){return l(this,void 0,void 0,function*(){for(this.stopped=!0,this.buffer.drainBuffer(),this.lastInputTime=Date.now();;){let t=e-(Date.now()-this.lastInputTime);if(t<=0)return;yield new Promise(e=>setTimeout(e,t))}})}sendLine(e,t){return l(this,void 0,void 0,function*(){this.writer(`#${e}:${t}${this.protocolNewline}`)})}recvLine(e,t=!1){return l(this,void 0,void 0,function*(){if(this.stopped)throw new t0("Stopped");if(this.isWindowsShell||this.remoteIsWindows){let t=yield this.buffer.readLineOnWindows(),i=t.lastIndexOf("#"+e+":");if(i>=0)t=t.substring(i);else{let e=t.lastIndexOf("#");e>0&&(t=t.substring(e))}return t}let i=yield this.buffer.readLine();if(this.tmuxOutputJunk||t){if(i.length>0)for(;"\r"===i[i.length-1];)i=i.substring(0,i.length-1)+(yield this.buffer.readLine());let t=i.lastIndexOf("#"+e+":");if(t>=0)i=i.substring(t);else{let e=i.lastIndexOf("#");e>0&&(i=i.substring(e))}i=function(e){for(;;){let t=e.indexOf("\x1bP=");if(t<0)return e;let i=t+3,r=e.substring(i).indexOf("\x1bP=");if(r<0)return e.substring(0,t);i+=r+3;let n=e.substring(i).indexOf("\x1b\\");if(n<0)return e.substring(0,t);i+=n+2,e=e.substring(0,t)+e.substring(i)}}(i)}return i})}recvCheck(e,t=!1){return l(this,void 0,void 0,function*(){let i=yield this.recvLine(e,t),r=i.indexOf(":");if(r<1)throw new t0(tQ(i),"colon",!0);let n=i.substring(1,r),s=i.substring(r+1);if(n!=e)throw new t0(s,n,!0);return s})}sendInteger(e,t){return l(this,void 0,void 0,function*(){yield this.sendLine(e,t.toString())})}recvInteger(e,t=!1){return l(this,void 0,void 0,function*(){return Number((yield this.recvCheck(e,t)))})}checkInteger(e){return l(this,void 0,void 0,function*(){let t=yield this.recvInteger("SUCC");if(t!==e)throw new t0(`Integer check [${t}] <> [${e}]`,null,!0)})}sendString(e,t){return l(this,void 0,void 0,function*(){yield this.sendLine(e,tQ(t))})}recvString(e,t=!1){return l(this,void 0,void 0,function*(){return tX(tV((yield this.recvCheck(e,t))),"utf8")})}checkString(e){return l(this,void 0,void 0,function*(){let t=yield this.recvString("SUCC");if(t!==e)throw new t0(`String check [${t}] <> [${e}]`,null,!0)})}sendBinary(e,t){return l(this,void 0,void 0,function*(){yield this.sendLine(e,tQ(t))})}recvBinary(e,t=!1){return l(this,void 0,void 0,function*(){return tV((yield this.recvCheck(e,t)))})}checkBinary(e){return l(this,void 0,void 0,function*(){let t=yield this.recvBinary("SUCC");if(t.length!=e.length)throw new t0(`Binary length check [${t.length}] <> [${e.length}]`,null,!0);for(let i=0;i<t.length;i++)if(t[i]!=e[i])throw new t0(`Binary check [${t[i]}] <> [${e[i]}]`,null,!0)})}sendData(e,t,i){return l(this,void 0,void 0,function*(){if(!t)return void(yield this.sendBinary("DATA",e));let r=function(e,t){if(!t.length)return e;let i=new Uint8Array(2*e.length),r=0;for(let n=0;n<e.length;n++){let s=-1;for(let i=0;i<t.length;i++)if(e[n]==t[i][0]){s=i;break}s<0?i[r++]=e[n]:(i[r++]=t[s][1],i[r++]=t[s][2])}return i.subarray(0,r)}(e,i);this.writer(`#DATA:${r.length}
`),this.writer(r)})}recvData(e,t,i){return l(this,void 0,void 0,function*(){return yield Promise.race([new Promise((e,t)=>setTimeout(()=>{this.cleanTimeoutInMilliseconds=3e3,t(new t0("Receive data timeout"))},i)),l(this,void 0,void 0,function*(){if(!e)return yield this.recvBinary("DATA");let i=yield this.recvInteger("DATA");return function(e,t){if(!t.length)return e;let i=new Uint8Array(e.length),r=0;for(let n=0;n<e.length;n++){let s=-1;if(n<e.length-1){for(let i=0;i<t.length;i++)if(e[n]==t[i][1]&&e[n+1]==t[i][2]){s=i;break}}s<0?i[r++]=e[n]:(i[r++]=t[s][0],n++)}return i.subarray(0,r)}((yield this.buffer.readBinary(i)),t)})])})}sendAction(e,t){return l(this,void 0,void 0,function*(){let i={lang:"js",confirm:e,version:"1.1.5",support_dir:!0};(this.isWindowsShell||t)&&(i.binary=!1,i.newline="!\n"),t&&(this.remoteIsWindows=!0,this.protocolNewline="!\n"),yield this.sendString("ACT",JSON.stringify(i))})}recvAction(){return l(this,void 0,void 0,function*(){let e=JSON.parse((yield this.recvString("ACT",!0)));return e.newline&&(this.protocolNewline=e.newline),e})}sendConfig(e,t,i,r){return l(this,void 0,void 0,function*(){let n={lang:"js"};e.quiet&&(n.quiet=!0),e.binary&&(n.binary=!0,n.escape_chars=t),e.directory&&(n.directory=!0),e.bufsize&&(n.bufsize=e.bufsize),e.timeout&&(n.timeout=e.timeout),e.overwrite&&(n.overwrite=!0),1==i&&(n.tmux_output_junk=!0),r>0&&(n.tmux_pane_width=r);let s=JSON.stringify(n);s=s.replace(/[\u007F-\uFFFF]/g,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)}),this.transferConfig=n,yield this.sendString("CFG",s)})}recvConfig(){return l(this,void 0,void 0,function*(){let e=yield this.recvString("CFG",!0);return this.transferConfig=JSON.parse(e),this.tmuxOutputJunk=!0===this.transferConfig.tmux_output_junk,this.transferConfig})}clientExit(e){return l(this,void 0,void 0,function*(){yield this.sendString("EXIT",e)})}recvExit(){return l(this,void 0,void 0,function*(){return this.recvString("EXIT")})}serverExit(e){return l(this,void 0,void 0,function*(){yield this.cleanInput(500),yield function(){return l(this,void 0,void 0,function*(){})}(),this.isWindowsShell?(e=e.replace(/\n/g,"\r\n"),n.stdout.write("\x1b[H\x1b[2J\x1b[?1049l")):n.stdout.write("\x1b8\x1b[0J"),n.stdout.write(e),n.stdout.write("\r\n"),n.stdout.write("\x1b[?25h"),this.transferConfig.tmux_output_junk&&(yield function(){return l(this,void 0,void 0,function*(){let e=r("N7Lcz").promisify(r("kjyEk").exec);yield e("tmux refresh-client")})}())})}deleteCreatedFiles(){return l(this,void 0,void 0,function*(){let e=[];for(let t of this.createdFiles){let i=yield t.deleteFile();i&&e.push(i)}return e})}clientError(e){return l(this,void 0,void 0,function*(){yield this.cleanInput(this.cleanTimeoutInMilliseconds);let t=t0.getErrorMessage(e),i=!0;if(e instanceof t0){if(i=e.isTraceBack(),e.isRemoteExit())return;if(e.isRemoteFail())return void(i&&console.log(t))}yield this.sendString(i?"FAIL":"fail",t),i&&console.log(t)})}serverError(e){return l(this,void 0,void 0,function*(){yield this.cleanInput(this.cleanTimeoutInMilliseconds);let t=t0.getErrorMessage(e),i=!0;if(e instanceof t0){if(e.isStopAndDelete()){let t=yield this.deleteCreatedFiles();if(t&&t.length)return void(yield this.serverExit([e.message+":"].concat(t).join("\r\n- ")))}if(i=e.isTraceBack(),e.isRemoteExit()||e.isRemoteFail())return void(yield this.serverExit(t))}yield this.sendString(i?"FAIL":"fail",t),yield this.serverExit(t)})}sendFileNum(e,t){return l(this,void 0,void 0,function*(){yield this.sendInteger("NUM",e),yield this.checkInteger(e),t&&t.onNum(e)})}sendFileName(e,t,i){return l(this,void 0,void 0,function*(){let r=e.getRelPath(),n=r[r.length-1];if(t){let t={path_id:e.getPathId(),path_name:r,is_dir:e.isDir()};yield this.sendString("NAME",JSON.stringify(t))}else yield this.sendString("NAME",n);let s=yield this.recvString("SUCC");return i&&i.onName(n),s})}sendFileSize(e,t){return l(this,void 0,void 0,function*(){yield this.sendInteger("SIZE",e),yield this.checkInteger(e),t&&t.onSize(e)})}sendFileData(e,t,i,r,n,s){return l(this,void 0,void 0,function*(){let a=0;s&&s.onStep(a);let l=1024,o=new ArrayBuffer(l),h=new iu;for(;a<t;){let t=Date.now(),d=yield e.readFile(o);yield this.sendData(d,i,r),h.appendByteArray(d),yield this.checkInteger(d.length),a+=d.length,s&&s.onStep(a);let u=Date.now()-t;d.length==l&&u<500&&l<n?(l=Math.min(2*l,n),o=new ArrayBuffer(l)):u>=2e3&&l>1024&&(l=1024,o=new ArrayBuffer(l)),u>this.maxChunkTimeInMilliseconds&&(this.maxChunkTimeInMilliseconds=u)}return new Uint8Array(h.end(!0).buffer)})}sendFileMD5(e,t){return l(this,void 0,void 0,function*(){yield this.sendBinary("MD5",e),yield this.checkBinary(e),t&&t.onDone()})}sendFiles(e,t){return l(this,void 0,void 0,function*(){this.openedFiles.push(...e);let i=!0===this.transferConfig.binary,r=!0===this.transferConfig.directory,n=this.transferConfig.bufsize||10485760,s=this.transferConfig.escape_chars?i_(this.transferConfig.escape_chars):[];yield this.sendFileNum(e.length,t);let a=[];for(let l of e){let e=yield this.sendFileName(l,r,t);if(a.includes(e)||a.push(e),l.isDir())continue;let o=l.getSize();yield this.sendFileSize(o,t);let h=yield this.sendFileData(l,o,i,s,n,t);l.closeFile(),yield this.sendFileMD5(h,t)}return a})}recvFileNum(e){return l(this,void 0,void 0,function*(){let t=yield this.recvInteger("NUM");return yield this.sendInteger("SUCC",t),e&&e.onNum(t),t})}recvFileName(e,t,i,r,n){return l(this,void 0,void 0,function*(){let s=yield this.recvString("NAME"),a=yield t(e,s,i,r);return this.createdFiles.push(a),yield this.sendString("SUCC",a.getLocalName()),n&&n.onName(a.getFileName()),a})}recvFileSize(e){return l(this,void 0,void 0,function*(){let t=yield this.recvInteger("SIZE");return yield this.sendInteger("SUCC",t),e&&e.onSize(t),t})}recvFileData(e,t,i,r,n,s){return l(this,void 0,void 0,function*(){let a=0;s&&s.onStep(a);let l=new iu;for(;a<t;){let t=Date.now(),o=yield this.recvData(i,r,n);yield e.writeFile(o),a+=o.length,s&&s.onStep(a),yield this.sendInteger("SUCC",o.length),l.appendByteArray(o);let h=Date.now()-t;h>this.maxChunkTimeInMilliseconds&&(this.maxChunkTimeInMilliseconds=h)}return new Uint8Array(l.end(!0).buffer)})}recvFileMD5(e,t){return l(this,void 0,void 0,function*(){let i=yield this.recvBinary("MD5");if(e.length!=i.length)throw new t0("Check MD5 failed");for(let t=0;t<e.length;t++)if(e[t]!=i[t])throw new t0("Check MD5 failed");yield this.sendBinary("SUCC",e),t&&t.onDone()})}recvFiles(e,t,i){return l(this,void 0,void 0,function*(){let r=!0===this.transferConfig.binary,n=!0===this.transferConfig.directory,s=!0===this.transferConfig.overwrite,a=this.transferConfig.timeout?1e3*this.transferConfig.timeout:1e5,l=this.transferConfig.escape_chars?i_(this.transferConfig.escape_chars):[],o=yield this.recvFileNum(i),h=[];for(let d=0;d<o;d++){let o=yield this.recvFileName(e,t,n,s,i);if(h.includes(o.getLocalName())||h.push(o.getLocalName()),o.isDir())continue;this.openedFiles.push(o);let d=yield this.recvFileSize(i),u=yield this.recvFileData(o,d,r,l,a,i);o.closeFile(),yield this.recvFileMD5(u,i)}return h})}}function iw(e,t){t-=3;let i=0,r="";for(let n=0;n<e.length;n++){if(e.charCodeAt(n)>=19968&&40869>=e.charCodeAt(n)){if(i+2>t)return{sub:r+"...",len:i+3};i+=2}else{if(i+1>t)return{sub:r+"...",len:i+3};i+=1}r+=e[n]}return{sub:r+"...",len:i+3}}function ig(e){let t="B";do{if(e<1024||(t="KB",(e/=1024)<1024)||(t="MB",(e/=1024)<1024)||(t="GB",(e/=1024)<1024))break;e/=1024,t="TB"}while(0)return e>=100?`${e.toFixed(0)} ${t}`:e>=10?`${e.toFixed(1)} ${t}`:`${e.toFixed(2)} ${t}`}class im{constructor(e,t,i){this.lastUpdateTime=0,this.firstWrite=!0,this.speedCnt=0,this.speedIdx=0,this.timeArray=Array(30),this.stepArray=Array(30),this.writer=e,this.tmuxPaneColumns=i||0,this.columns=this.tmuxPaneColumns>1?this.tmuxPaneColumns-1:t}setTerminalColumns(e){this.columns=e,this.tmuxPaneColumns>0&&(this.tmuxPaneColumns=0)}onNum(e){this.fileCount=e,this.fileIdx=0}onName(e){this.fileName=e,this.fileIdx+=1,this.startTime=Date.now(),this.timeArray[0]=this.startTime,this.stepArray[0]=0,this.speedCnt=1,this.speedIdx=1,this.fileStep=-1}onSize(e){this.fileSize=e}onStep(e){e<=this.fileStep||(this.fileStep=e,this.showProgress())}hideCursor(){this.writer("\x1b[?25l")}showCursor(){this.writer("\x1b[?25h")}showProgress(){let e=Date.now();if(e-this.lastUpdateTime<200)return;this.lastUpdateTime=e;let t="100%";0!=this.fileSize&&(t=Math.round(100*this.fileStep/this.fileSize).toString()+"%");let i=ig(this.fileStep),r=this.getSpeed(e),n="--- B/s",s="--- ETA";r>0&&(n=ig(r)+"/s",s=function(e){let t="";e>=3600&&(t+=Math.floor(e/3600).toString()+":",e%=3600);let i=Math.floor(e/60);t+=(i>=10?i.toString():"0"+i.toString())+":";let r=Math.round(e%60);return t+(r>=10?r.toString():"0"+r.toString())}(Math.round((this.fileSize-this.fileStep)/r))+" ETA");let a=this.getProgressText(t,i,n,s);if(this.firstWrite)return this.firstWrite=!1,void this.writer(a);this.tmuxPaneColumns>0?this.writer(`[${this.columns}D${a}`):this.writer(`\r${a}`)}getSpeed(e){let t;return this.speedCnt<=30?(this.speedCnt++,t=1e3*(this.fileStep-this.stepArray[0])/(e-this.timeArray[0])):t=1e3*(this.fileStep-this.stepArray[this.speedIdx])/(e-this.timeArray[this.speedIdx]),this.timeArray[this.speedIdx]=e,this.stepArray[this.speedIdx]=this.fileStep,this.speedIdx++,this.speedIdx>=30&&(this.speedIdx%=30),isFinite(t)?t:-1}getProgressText(e,t,i,r){let n=this.fileCount>1?`(${this.fileIdx}/${this.fileCount}) ${this.fileName}`:this.fileName,s=n.replace(/[\u4e00-\u9fa5]/g,"**").length,a=` ${e} | ${t} | ${i} | ${r}`;do{if(this.columns-s-a.length>=24||(s>50&&({sub:n,len:s}=iw(n,50)),this.columns-s-a.length>=24)||(s>40&&({sub:n,len:s}=iw(n,40)),this.columns-s-a.length>=24)||(a=` ${e} | ${i} | ${r}`,this.columns-s-a.length>=24)||(s>30&&({sub:n,len:s}=iw(n,30)),this.columns-s-a.length>=24)||(a=` ${e} | ${r}`,this.columns-s-a.length>=24)||(a=` ${e}`,this.columns-s-a.length>=24)||(s>20&&({sub:n,len:s}=iw(n,20)),this.columns-s-a.length>=24))break;n="",s=0}while(0)let l=this.columns-a.length;return s>0&&(l-=s+1,n+=" "),(n+this.getProgressBar(l)+a).trim()}getProgressBar(e){if(e<12)return"";let t=e-2,i=t;return 0!=this.fileSize&&(i=Math.round(t*this.fileStep/this.fileSize)),"[\x1b[36m"+"".repeat(i)+"".repeat(t-i)+"\x1b[0m]"}onDone(){0!=this.fileSize&&(this.fileStep=this.fileSize,this.lastUpdateTime=0,this.showProgress())}}let iy="::TRZSZ:TRANSFER:",ib=new RegExp(/::TRZSZ:TRANSFER:([SRD]):(\d+\.\d+\.\d+)(:\d+)?/),iv=new Float64Array(tG(iy).buffer,0,2);class ik{constructor(e){if(this.trzszTransfer=null,this.textProgressBar=null,this.uniqueIdMaps=new Map,this.uploadFilesList=null,this.uploadFilesResolve=null,this.uploadFilesReject=null,this.uploadInterrupting=!1,this.uploadSkipTrzCommand=!1,!e)throw new t0("TrzszOptions is required");if(!e.writeToTerminal)throw new t0("TrzszOptions.writeToTerminal is required");if(this.writeToTerminal=e.writeToTerminal,!e.sendToServer)throw new t0("TrzszOptions.sendToServer is required");if(this.sendToServer=e.sendToServer,!tJ&&!e.chooseSendFiles)throw new t0("TrzszOptions.chooseSendFiles is required when having a node runtime environment");if(this.chooseSendFiles=e.chooseSendFiles,!tJ&&!e.chooseSaveDirectory)throw new t0("TrzszOptions.chooseSaveDirectory is required when having a node runtime environment");this.chooseSaveDirectory=e.chooseSaveDirectory,this.terminalColumns=e.terminalColumns||80,this.isWindowsShell=!!e.isWindowsShell,this.dragInitTimeout=e.dragInitTimeout||3e3}processServerOutput(e){if(this.isTransferringFiles())this.trzszTransfer.addReceivedData(e);else if(!this.uploadInterrupting){if(this.uploadSkipTrzCommand){this.uploadSkipTrzCommand=!1;let t=function(e){let t;if("string"==typeof e)t=tG(e);else if(e instanceof ArrayBuffer)t=new Uint8Array(e);else{if(!(e instanceof Uint8Array))return e;t=e}let i=new Uint8Array(t.length),r=!1,n=0;for(let e=0;e<t.length;e++){let s=t[e];r?t1(s)&&(r=!1):27==s?r=!0:i[n++]=s}for(;n>0;){let e=i[n-1];if(13!=e&&10!=e)break;n--}let s=i.subarray(0,n);return s.length>100?e:String.fromCharCode.apply(null,s)}(e);if("trz"===t||"trz -d"===t)return void this.writeToTerminal("\r\n")}setTimeout(()=>this.detectAndHandleTrzsz(e),10),this.writeToTerminal(e)}}processTerminalInput(e){this.isTransferringFiles()?"\x03"===e&&this.stopTransferringFiles():this.sendToServer(e)}processBinaryInput(e){this.isTransferringFiles()||this.sendToServer(tG(e))}setTerminalColumns(e){this.terminalColumns=e,null!=this.textProgressBar&&this.textProgressBar.setTerminalColumns(e)}isTransferringFiles(){return null!=this.trzszTransfer}stopTransferringFiles(){this.isTransferringFiles()&&this.trzszTransfer.stopTransferring()}uploadFiles(e){return l(this,void 0,void 0,function*(){if(this.uploadFilesList||this.isTransferringFiles())throw Error("The previous upload has not been completed yet");if(e instanceof DataTransferItemList||e instanceof FileList)this.uploadFilesList=yield function(e){return l(this,void 0,void 0,function*(){let t=[],i=[];if(e instanceof FileList)for(let t of e)i.push({isFile:!0,isDirectory:!1,name:t.name,fullPath:"/"+t.name,file:e=>e(t)});else for(let t of e){let e=t.webkitGetAsEntry();e&&i.push(e)}for(let e=0;e<i.length;e++){let r=i[e];r&&(yield function e(t,i,r,n){return l(this,void 0,void 0,function*(){i.isFile?yield new Promise(e=>{i.file(i=>{r.push(new ir(t,n,i,!1)),e()})}):i.isDirectory&&(r.push(new ir(t,n,null,!0)),yield new Promise(s=>{i.createReader().readEntries(i=>l(this,void 0,void 0,function*(){for(let s of i)yield e(t,s,r,[...n,s.name]);s()}))}))})}(e,r,t,[r.name]))}return t})}(e);else{if(!function(e,t){if(!Array.isArray(e))return!1;for(let i of e)if(typeof i!==t)return!1;return!0}(e,"string")||tJ)throw Error("The upload items type is not supported");this.uploadFilesList=yield t4(e,!0)}if(!this.uploadFilesList||!this.uploadFilesList.length)throw this.uploadFilesList=null,Error("No files to upload");let t=!1;for(let e of this.uploadFilesList)if(e.isDir()||e.getRelPath().length>1){t=!0;break}return this.uploadInterrupting=!0,this.sendToServer("\x03"),yield new Promise(e=>setTimeout(e,200)),this.uploadInterrupting=!1,this.uploadSkipTrzCommand=!0,this.sendToServer(t?"trz -d\r":"trz\r"),setTimeout(()=>{this.uploadFilesList&&(this.uploadFilesList=null,this.uploadFilesResolve=null,this.uploadFilesReject&&(this.uploadFilesReject("Upload does not start"),this.uploadFilesReject=null))},this.dragInitTimeout),new Promise((e,t)=>{this.uploadFilesResolve=e,this.uploadFilesReject=t})})}uniqueIdExists(e){if(e.length<8||!this.isWindowsShell&&14==e.length&&e.endsWith("00"))return!1;if(this.uniqueIdMaps.has(e))return!0;if(this.uniqueIdMaps.size>=100){let e=new Map;for(let[t,i]of this.uniqueIdMaps)i>=50&&e.set(t,i-50);this.uniqueIdMaps=e}return this.uniqueIdMaps.set(e,this.uniqueIdMaps.size),!1}detectAndHandleTrzsz(e){return l(this,void 0,void 0,function*(){let t=yield function(e){return l(this,void 0,void 0,function*(){let t;if("string"==typeof e){let t=e.lastIndexOf(iy);return t<0?null:e.substring(t)}if(e instanceof ArrayBuffer)t=new Uint8Array(e);else if(e instanceof Uint8Array)t=e;else{if(!(e instanceof Blob))return null;t=new Uint8Array((yield e.arrayBuffer()))}if(t.length<26)return null;let i=-1,r=-1;for(;;){if((i=t.indexOf(58,i+1))<0||t.length-i<26)return r>=0?tX(t.subarray(r)):null;let e=new Float64Array(t.buffer.slice(t.byteOffset+i,t.byteOffset+i+16));e[0]==iv[0]&&e[1]==iv[1]&&(r=i,i+=25)}})}(e);if(!t)return;let i=t.match(ib);if(!i)return;let r=i.length>3?i[3]:"";if(this.uniqueIdExists(r))return;let n=i[1],s=i[2],a=!1;(":1"==r||14==r.length&&r.endsWith("10"))&&(a=!0);try{this.trzszTransfer=new ip(this.sendToServer,this.isWindowsShell),"S"===n?yield this.handleTrzszDownloadFiles(s,a):"R"===n?yield this.handleTrzszUploadFiles(s,!1,a):"D"===n&&(yield this.handleTrzszUploadFiles(s,!0,a)),this.uploadFilesResolve&&this.uploadFilesResolve()}catch(e){yield this.trzszTransfer.clientError(e),this.uploadFilesReject&&this.uploadFilesReject(e)}finally{this.uploadFilesResolve=null,this.uploadFilesReject=null,this.trzszTransfer.cleanup(),this.textProgressBar&&this.textProgressBar.showCursor(),this.textProgressBar=null,this.trzszTransfer=null}})}createProgressBar(e,t){!0!==e?(this.textProgressBar=new im(this.writeToTerminal,this.terminalColumns,t),this.textProgressBar.hideCursor()):this.textProgressBar=null}handleTrzszDownloadFiles(e,t){return l(this,void 0,void 0,function*(){let e,i,r;if(tJ){let n=yield function(){return l(this,void 0,void 0,function*(){if("function"!=typeof window.showDirectoryPicker)throw is();try{return yield window.showDirectoryPicker({id:"trzsz_download",startIn:"downloads",mode:"readwrite"})}catch(e){if("AbortError"===e.name)return;throw e}})}();if(!n)return void(yield this.trzszTransfer.sendAction(!1,t));e=n.name,i={handle:n,maps:new Map},r=id}else{if(!(e=yield this.chooseSaveDirectory()))return void(yield this.trzszTransfer.sendAction(!1,t));yield function(e){return l(this,void 0,void 0,function*(){if(!e)return!1;if(!(yield t5.accessAsync(e)))throw new t0(`No such directory: ${e}`);if(!(yield t5.statAsync(e)).isDirectory())throw new t0(`Not a directory: ${e}`);if(!(yield t5.accessAsync(e,t5.constants.W_OK)))throw new t0(`No permission to write: ${e}`);return!0})}(e),i={path:e,maps:new Map},r=ii}yield this.trzszTransfer.sendAction(!0,t);let n=yield this.trzszTransfer.recvConfig();this.createProgressBar(n.quiet,n.tmux_pane_width);let s=yield this.trzszTransfer.recvFiles(i,r,this.textProgressBar);yield this.trzszTransfer.clientExit(t2(s,e))})}handleTrzszUploadFiles(e,t,i){return l(this,void 0,void 0,function*(){let e;if(this.uploadFilesList)e=this.uploadFilesList,this.uploadFilesList=null;else if(tJ)e=t?yield function(){return l(this,void 0,void 0,function*(){let e;if("function"!=typeof window.showDirectoryPicker)throw is();try{e=yield window.showDirectoryPicker({id:"trzsz_upload",startIn:"documents"})}catch(e){if("AbortError"===e.name)return;throw e}let t=[];return yield function e(t,i,r,n){var s,a,h,d;return l(this,void 0,void 0,function*(){if("file"===i.kind){let e=yield i.getFile();r.push(new ir(t,n,e,!1))}else if("directory"===i.kind){r.push(new ir(t,n,null,!0));try{for(var l,u=!0,f=o(i.values());!(s=(l=yield f.next()).done);u=!0){d=l.value,u=!1;let s=d.name;"file"===d.kind?yield e(t,(yield i.getFileHandle(s)),r,[...n,s]):"directory"===d.kind&&(yield e(t,(yield i.getDirectoryHandle(s)),r,[...n,s]))}}catch(e){a={error:e}}finally{try{!u&&!s&&(h=f.return)&&(yield h.call(f))}finally{if(a)throw a.error}}}})}(0,e,t,[e.name]),t})}():yield function(){return l(this,void 0,void 0,function*(){let e;if("function"!=typeof window.showOpenFilePicker)throw is();try{e=yield window.showOpenFilePicker({id:"trzsz_upload",startIn:"documents",multiple:!0})}catch(e){if("AbortError"===e.name)return;throw e}if(!e||!e.length)return;let t=[];for(let[i,r]of e.entries()){let e=yield r.getFile();t.push(new ir(i,[e.name],e,!1))}return t})}();else{let i=yield this.chooseSendFiles(t);e=yield t4(i,t)}if(!e||!e.length)return void(yield this.trzszTransfer.sendAction(!1,i));yield this.trzszTransfer.sendAction(!0,i);let r=yield this.trzszTransfer.recvConfig();!0===r.overwrite&&function(e){let t=new Set;for(let i of e){let e=i.getRelPath().join("/");if(t.has(e))throw new t0(`Duplicate name: ${e}`);t.add(e)}}(e),this.createProgressBar(r.quiet,r.tmux_pane_width);let n=yield this.trzszTransfer.sendFiles(e,this.textProgressBar);yield this.trzszTransfer.clientExit(t2(n,""))})}}e.TrzszAddon=class{constructor(e,t){this.disposables=[],this.trzsz=null,this.socket=e,this.options=t||{},this.socket.binaryType="arraybuffer"}activate(e){this.trzsz=new ik({writeToTerminal:this.options.writeToTerminal||(t=>{e.write("string"==typeof t?t:new Uint8Array(t))}),sendToServer:this.options.sendToServer||(e=>{1===this.socket.readyState&&this.socket.send(e)}),chooseSendFiles:this.options.chooseSendFiles,chooseSaveDirectory:this.options.chooseSaveDirectory,terminalColumns:e.cols,isWindowsShell:this.options.isWindowsShell,dragInitTimeout:this.options.dragInitTimeout}),this.disposables.push(this.addSocketListener(this.socket,"message",e=>this.trzsz.processServerOutput(e.data))),this.disposables.push(e.onData(e=>this.trzsz.processTerminalInput(e))),this.disposables.push(e.onBinary(e=>this.trzsz.processBinaryInput(e))),this.disposables.push(e.onResize(e=>this.trzsz.setTerminalColumns(e.cols))),this.disposables.push(this.addSocketListener(this.socket,"close",()=>this.dispose())),this.disposables.push(this.addSocketListener(this.socket,"error",()=>this.dispose()))}dispose(){for(let e of this.disposables)e.dispose();this.trzsz=null}uploadFiles(e){return l(this,void 0,void 0,function*(){if(this.trzsz)return this.trzsz.uploadFiles(e);throw Error("Addon has not been activated")})}addSocketListener(e,t,i){return e.addEventListener(t,i),{dispose:()=>{i&&e.removeEventListener(t,i)}}}},e.TrzszFilter=ik}({});
//# sourceMappingURL=index.2bb9dcfc.js.map
